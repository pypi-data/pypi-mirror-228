(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[822],{48240:function(e,n,t){var r=t(6185),i={ease:r(.25,.1,.25,1),easeIn:r(.42,0,1,1),easeOut:r(0,0,.58,1),easeInOut:r(.42,0,.58,1),linear:r(0,0,1,1)};function o(){}function u(){var e=new Set,n=new Set,t=0;return{next:r,cancel:r,clearAll:function(){e.clear(),n.clear(),cancelAnimationFrame(t),t=0}};function r(e){n.add(e),t||(t=requestAnimationFrame(i))}function i(){t=0;var r=n;n=e,(e=r).forEach(function(e){e()}),e.clear()}}e.exports=function(e,n,t){var r,u=Object.create(null),a=Object.create(null),s="function"==typeof(t=t||{}).easing?t.easing:i[t.easing];s||(t.easing&&console.warn("Unknown easing function in amator: "+t.easing),s=i.ease);var c="function"==typeof t.step?t.step:o,l="function"==typeof t.done?t.done:o,f=function(e){if(!e)return"undefined"!=typeof window&&window.requestAnimationFrame?{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}:{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}};if("function"!=typeof e.next)throw Error("Scheduler is supposed to have next(cb) function");if("function"!=typeof e.cancel)throw Error("Scheduler is supposed to have cancel(handle) function");return e}(t.scheduler),d=Object.keys(n);d.forEach(function(t){u[t]=e[t],a[t]=n[t]-e[t]});var p=Math.max(1,.06*("number"==typeof t.duration?t.duration:400)),h=0;return r=f.next(function n(){var t=s(h/p);h+=1,d.forEach(function(n){e[n]=a[n]*t+u[n]}),h<=p?(r=f.next(n),c(e)):(r=0,setTimeout(function(){l(e)},0))}),{cancel:function(){f.cancel(r),r=0}}},e.exports.makeAggregateRaf=u,e.exports.sharedScheduler=u()},6185:function(e){var n="function"==typeof Float32Array;function t(e,n,t){return(((1-3*t+3*n)*e+(3*t-6*n))*e+3*n)*e}function r(e,n,t){return 3*(1-3*t+3*n)*e*e+2*(3*t-6*n)*e+3*n}function i(e){return e}e.exports=function(e,o,u,a){if(!(0<=e&&e<=1&&0<=u&&u<=1))throw Error("bezier x values must be in [0, 1] range");if(e===o&&u===a)return i;for(var s=n?new Float32Array(11):Array(11),c=0;c<11;++c)s[c]=t(.1*c,e,u);return function(n){return 0===n?0:1===n?1:t(function(n){for(var i=0,o=1;10!==o&&s[o]<=n;++o)i+=.1;var a=i+(n-s[--o])/(s[o+1]-s[o])*.1,c=r(a,e,u);return c>=.001?function(e,n,i,o){for(var u=0;u<4;++u){var a=r(n,i,o);if(0===a)break;var s=t(n,i,o)-e;n-=s/a}return n}(n,a,e,u):0===c?a:function(e,n,r,i,o){var u,a,s=0;do(u=t(a=n+(r-n)/2,i,o)-e)>0?r=a:n=a;while(Math.abs(u)>1e-7&&++s<10);return a}(n,i,i+.1,e,u)}(n),o,a)}}},38333:function(e,n,t){var r=t(77832);e.exports=function(e,n){return!!(null==e?0:e.length)&&r(e,n,0)>-1}},34893:function(e){e.exports=function(e,n,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(n,e[r]))return!0;return!1}},21359:function(e){e.exports=function(e,n,t,r){for(var i=e.length,o=t+(r?1:-1);r?o--:++o<i;)if(n(e[o],o,e))return o;return -1}},77832:function(e,n,t){var r=t(21359),i=t(22195),o=t(66024);e.exports=function(e,n,t){return n==n?o(e,n,t):r(e,i,t)}},22195:function(e){e.exports=function(e){return e!=e}},67326:function(e,n,t){var r=t(45386),i=t(38333),o=t(34893),u=t(59950),a=t(78803),s=t(16909);e.exports=function(e,n,t){var c=-1,l=i,f=e.length,d=!0,p=[],h=p;if(t)d=!1,l=o;else if(f>=200){var m=n?null:a(e);if(m)return s(m);d=!1,l=u,h=new r}else h=n?[]:p;e:for(;++c<f;){var x=e[c],v=n?n(x):x;if(x=t||0!==x?x:0,d&&v==v){for(var g=h.length;g--;)if(h[g]===v)continue e;n&&h.push(v),p.push(x)}else l(h,v,t)||(h!==p&&h.push(v),p.push(x))}return p}},78803:function(e,n,t){var r=t(2143),i=t(34291),o=t(16909),u=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=u},66024:function(e){e.exports=function(e,n,t){for(var r=t-1,i=e.length;++r<i;)if(e[r]===n)return r;return -1}},34291:function(e){e.exports=function(){}},75652:function(e,n,t){var r=t(67326);e.exports=function(e){return e&&e.length?r(e):[]}},58:function(e,n,t){"use strict";t.r(n),t.d(n,{RunRoot:function(){return eg},default:function(){return ey}});var r=t(73235),i=t(52322),o=t(40794),u=t(60138),a=t(2736),s=t(62540),c=t(19369),l=t(94901),f=t(42033),d=t(17577),p=t(45),h=t(2784),m=t(7267),x=t(61893),v=t(48608),g=t(28292),y=t(82550),j=t(87323),w=t(12734),S=t(88528),I=t(47933),b=t(50292),T=new Intl.Collator(navigator.language,{sensitivity:"base"}),A=function(e){var n=e.assetKeys,t=e.evaluationId,r=h.useMemo(function(){return(0,y._)(n).sort(function(e,n){return T.compare(e.path.join("/"),n.path.join("/"))})},[n]);return(0,i.jsx)(d.J,{placement:"bottom",content:(0,i.jsxs)("div",{style:{width:"340px"},children:[(0,i.jsx)(a.x,{padding:{vertical:8,horizontal:12},border:{side:"bottom",width:1,color:j.w.KeylineGray},style:{fontWeight:600},children:"Auto-materialized"}),(0,i.jsx)(a.x,{flex:{direction:"column",gap:12},padding:{vertical:12},style:{maxHeight:"220px",overflowY:"auto"},children:r.map(function(e){var n=(0,b.p)(e,{view:"auto-materialize-history",evaluation:t});return(0,i.jsxs)(a.x,{padding:{vertical:8,left:12,right:16},flex:{direction:"row",justifyContent:"space-between",alignItems:"center",gap:8},style:{overflow:"hidden"},children:[(0,i.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:8},style:{overflow:"hidden"},children:[(0,i.jsx)(w.JO,{name:"asset"}),(0,i.jsx)(S.g,{text:e.path.join("/")})]}),(0,i.jsx)(I.rU,{to:n,style:{whiteSpace:"nowrap"},children:"View evaluation"})]},n)})})]}),interactionKind:"hover",children:(0,i.jsx)(f.V,{icon:"auto_materialize_policy",children:"Auto-materialized"})})},_=t(34503),F=t(24651),E=t(30082),O=t(33667),K=t(61018),R=t(19041),k=t(97350),N=t(85333),C=t(6692),L=t(58467),z=t(49363),V=t(8504),q=t(35505),U=t(8848),D=t(33467),J=t(14590),Q=t(1258),P=t(5500),M=t(7334),W=function(e){h.useEffect(function(){var n=document.querySelector('link[rel="icon"][type="image/svg+xml"]');if(n){var t=n.getAttribute("href");return n.setAttribute("href",e),function(){t&&n.setAttribute("href",t)}}},[e])},G=t(76358),H=t(52427),Z=t(3553),B=t(43576),X=t(13729),$=t(71135),Y=t(13304),ee=t(77959),en=t(37416),et=t(50027),er=t(29330),ei=t(79062),eo=t(52024);function eu(){var e=(0,r._)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]);return eu=function(){return e},e}var ea=function(e){switch(e){case M.VOA.FAILURE:return"/favicon-run-failed.svg";case M.VOA.SUCCESS:return"/favicon-run-success.svg";case M.VOA.STARTING:case M.VOA.STARTED:case M.VOA.CANCELING:return"/favicon-run-pending.svg";default:return"/favicon.svg"}},es=function(e){var n=e.run,t=e.runId,r=(0,L._)((0,eo.Bz)(),2),o=r[0],u=r[1],a=(0,L._)((0,G.q)({queryKey:"selection",defaults:{selection:""}}),2),s=a[0],c=a[1];W(n?ea(n.status):"/favicon.svg"),(0,_.j)(n?"".concat((0,g.pv)(n.pipelineName)?"":n.pipelineName," ").concat(t.slice(0,8)," [").concat(n.status,"]"):"Run: ".concat(t));var l=function(e,n){var t=n.find(function(n){return"ExecutionStepFailureEvent"===n.__typename&&n.stepKey===e});t&&(0,U._)({body:(0,i.jsx)(J.T9,{error:t})})},f=function(e){c(e),u((0,C._)((0,N._)({},o),{logQuery:"*"!==e?[{token:"query",value:e}]:[]}))};return(0,i.jsx)(en.A.Provider,{value:n,children:(0,i.jsx)(X.C,{runId:t,children:function(e){return(0,i.jsx)(et.jp,{logs:e,children:function(r){return(0,i.jsx)(el,{run:n,runId:t,logs:e,logsFilter:o,metadata:r,selectionQuery:s,onSetLogsFilter:u,onSetSelectionQuery:f,onShowStateDetails:l})}})}},t)})},ec=function(e){switch(e){case"stdout":return Y.hi.stdout;case"stderr":return Y.hi.stderr;default:return Y.hi.structured}},el=function(e){var n=e.run,t=e.runId,r=e.logs,o=e.logsFilter,u=e.metadata,s=e.selectionQuery,c=e.onSetLogsFilter,l=e.onSetSelectionQuery,f=(0,ei.W)(n),d=h.createRef(),m=(0,L._)((0,G.q)({queryKey:"logType",defaults:{logType:"structured"}}),2),x=m[0],v=m[1],g=ec(x),j=(0,L._)(h.useState(null),2),w=j[0],S=j[1],I=JSON.stringify(Object.keys(u.steps).sort()),b=h.useMemo(function(){return JSON.parse(I)},[I]),T=(null==n?void 0:n.executionPlan)&&(0,P.J)(null==n?void 0:n.executionPlan,u.steps),A=h.useMemo(function(){return T&&s&&"*"!==s?(0,D.V)(T,s).all.map(function(e){return e.name}):[]},[T,s]),_=(0,H.a)(),F=(0,er.r)({stepKeys:b,selectionStepKeys:A,metadata:u}),E=F.logCaptureInfo,O=F.computeLogFileKey,K=F.setComputeLogFileKey,R=T?o.logQuery.filter(function(e){return e.token&&"query"===e.token}).reduce(function(e,n){return(0,y._)(e).concat((0,y._)((0,D.V)(T,n.value).all.map(function(e){return e.name})))},[]):[];return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(V.OS,{ref:d,axis:"vertical",identifier:"run-gantt",firstInitialPercent:35,firstMinSize:56,first:n?"QUEUED"===n.status?(0,i.jsx)(Q.Fu,{run:n}):n.executionPlan&&T?(0,i.jsx)(z.S,{region:"gantt chart",children:(0,i.jsx)(Q.hj,{options:{mode:Q.hS.WATERFALL_TIMED},toolbarActions:(0,i.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,i.jsx)(V.jo,{axis:"vertical",container:d}),(0,i.jsx)(ee.NX,{run:n,onLaunch:f,graph:T,metadata:u,selection:{query:s,keys:A}})]}),runId:t,graph:T,metadata:u,selection:{query:s,keys:A},onClickStep:function(e,n){var t,r=A.indexOf(e),i='"'.concat(e,'"');if(n.shiftKey)t=(0,y._)(A.map(function(e){return s.includes('"'.concat(e,'"'))?'"'.concat(e,'"'):e})),-1!==r?t.splice(r,1):t.push(i);else if(1===A.length&&-1!==r)t=[];else{t=[i];var o=(0,er.c)(u.logCaptureSteps,e);o&&K(o)}l(t.join(", ")||"*")},onSetSelection:l,focusedTime:o.focusedTime})}):(0,i.jsx)(p.t,{icon:"error",title:"Unable to build execution plan"}):(0,i.jsx)(Q.ZW,{runId:t}),second:(0,i.jsx)(z.S,{region:"logs",children:(0,i.jsxs)(ef,{children:[(0,i.jsx)(Y.KZ,{logType:g,onSetLogType:function(e){return v(Y.hi[e])},filter:o,onSetFilter:c,steps:b,metadata:u,computeLogFileKey:O,onSetComputeLogKey:K,computeLogUrl:w,counts:r.counts}),g!==Y.hi.structured?_?(0,i.jsx)(Z.h,{logKey:O?[t,"compute_logs",O]:[],logCaptureInfo:E,visibleIOType:Y.hi[g],onSetDownloadUrl:S}):(0,i.jsx)(B.K,{runId:t,computeLogFileKey:b.length?O:void 0,ioType:Y.hi[g],setComputeLogUrl:S}):(0,i.jsx)($.S,{logs:r,filter:o,filterStepKeys:R,filterKey:"".concat(JSON.stringify(o)),metadata:u})]})})})})},ef=q.ZP.div.withConfig({componentId:"sc-6f10b2-0"})(eu()),ed=t(486),ep=t(54095),eh=t(50743),em=t(29545),ex=t(83221);function ev(){var e=(0,r._)(["\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        ...RunPageFragment\n      }\n    }\n  }\n\n  ","\n"]);return ev=function(){return e},e}var eg=function(){(0,v.Px)();var e,n=(0,m.UO)().runId;(0,_.j)(n?"Run ".concat(n.slice(0,8)):"Run");var t=(0,o.a)(ew,{variables:{runId:n}}),r=t.data,u=t.loading,p=(null==r?void 0:r.pipelineRunOrError.__typename)==="Run"?r.pipelineRunOrError:null,y=null==p?void 0:p.pipelineSnapshotId,j=(0,R.n)(p),w=(null==j?void 0:j.match)?(0,K.kQ)(j.match.repository.name,j.match.repositoryLocation.name):null,S=h.useMemo(function(){return!!(p&&j&&(0,O.E8)(j.match,p.pipelineName))},[p,j]),I=h.useMemo(function(){return(null==p?void 0:p.tags.find(function(e){return e.key===em.H.AssetEvaluationID}))||null},[p]);return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%",overflow:"hidden"},children:[(0,i.jsx)(a.x,{flex:{direction:"row",alignItems:"flex-start"},style:{position:"relative",zIndex:1},children:(0,i.jsx)(s.m,{title:(0,i.jsx)(c.X6,{style:{fontFamily:l.b.monospace,fontSize:"20px"},children:n.slice(0,8)}),tags:p?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eh.KG,{status:p.status}),(0,g.pv)(p.pipelineName)?(0,i.jsx)(k.m,{assetKeys:(0,ex.Bo)(p),useTags:!0}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.V,{icon:"run",children:["Run of"," ",(0,i.jsx)(F.h,{pipelineName:null==p?void 0:p.pipelineName,pipelineHrefContext:w||"repo-unknown",snapshotId:y,size:"small",isJob:S})]}),(0,i.jsx)(k.m,{assetKeys:p.assets.map(function(e){return e.key}),useTags:!0})]}),(0,i.jsxs)(a.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[(null==p?void 0:p.startTime)?(0,i.jsx)(d.J,{interactionKind:"hover",placement:"bottom",content:(0,i.jsx)(a.x,{padding:16,children:(0,i.jsx)(ed.lc,{run:p,loading:u})}),children:(0,i.jsx)(f.V,{icon:"schedule",children:(0,i.jsx)(E.v,{timestamp:p.startTime,timeFormat:{showSeconds:!0,showTimezone:!1}})})}):p.updateTime?(0,i.jsx)(f.V,{icon:"schedule",children:(0,i.jsx)(E.v,{timestamp:p.updateTime,timeFormat:{showSeconds:!0,showTimezone:!1}})}):void 0,(null==p?void 0:p.startTime)&&(null==p?void 0:p.endTime)?(0,i.jsx)(d.J,{interactionKind:"hover",placement:"bottom",content:(0,i.jsx)(a.x,{padding:16,children:(0,i.jsx)(ed.lc,{run:p,loading:u})}),children:(0,i.jsx)(f.V,{icon:"timer",children:(0,i.jsx)("span",{style:{fontVariantNumeric:"tabular-nums"},children:(null==p?void 0:p.startTime)?(0,x.fv)(((null==p?void 0:p.endTime)*1e3||Date.now())-(null==p?void 0:p.startTime)*1e3):"–"})})}):null,I&&(null===(e=p.assetSelection)||void 0===e?void 0:e.length)?(0,i.jsx)(A,{assetKeys:p.assetSelection,evaluationId:I.value}):null]})]}):null,right:p?(0,i.jsx)(ed.Up,{run:p,isJob:S}):null})}),(0,i.jsx)(ej,{data:r,runId:n})]})},ey=eg,ej=function(e){var n=e.data,t=e.runId;return n&&n.pipelineRunOrError?"Run"!==n.pipelineRunOrError.__typename?(0,i.jsx)(a.x,{padding:{vertical:64},children:(0,i.jsx)(p.t,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})}):(0,i.jsx)(es,{run:n.pipelineRunOrError,runId:t}):(0,i.jsx)(es,{run:void 0,runId:t})},ew=(0,u.Ps)(ev(),ep.tQ)},79062:function(e,n,t){"use strict";t.d(n,{W:function(){return d}});var r=t(81862),i=t(58467),o=t(22970),u=t(33379),a=t(2784),s=t(7267),c=t(30404),l=t(19041),f=t(83221),d=function(e){var n,t=(0,s.k6)(),d=(0,i._)((0,u.D)(f.kO),1)[0],p=(0,l.n)(e);return a.useCallback((n=(0,r._)(function(n){var r,i,u,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!e||!e.pipelineSnapshotId||!p)return[2];r=(0,f.kz)({run:e,style:n,repositoryLocationName:p.match.repositoryLocation.name,repositoryName:p.match.repository.name}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,d({variables:r})];case 2:return u=o.sent(),(0,f.lF)(e.pipelineName,null===(i=u.data)||void 0===i?void 0:i.launchPipelineReexecution,t,{preserveQuerystring:!0,behavior:"open"}),[3,4];case 3:return a=o.sent(),(0,c.t)(a),[3,4];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[t,d,p,e])}}}]);
//# sourceMappingURL=822.b59a4ba5c2046a24.js.map