"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[891],{26977:function(e,n,t){t.d(n,{Q1:function(){return T},Qf:function(){return S},zc:function(){return w}});var r=t(85333),i=t(6692),s=t(58467),o=t(73235),u=t(82550),c=t(52322),l=t(40794),a=t(60138),d=t(70399),h=t(87323),m=t(18149),p=t.n(m),f=t(2784),x=t(7267),j=t(35505),g=t(34503),v=t(16369),y=t(37842),k=t(47424);function R(){var e=(0,o._)(["\n  ","\n"]);return R=function(){return e},e}function _(){var e=(0,o._)(["\n  query RunTabsCountQuery($queuedFilter: RunsFilter!, $inProgressFilter: RunsFilter!) {\n    queuedCount: pipelineRunsOrError(filter: $queuedFilter) {\n      ... on Runs {\n        count\n      }\n    }\n    inProgressCount: pipelineRunsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        count\n      }\n    }\n  }\n"]);return _=function(){return e},e}var C=function(e){switch(e){case"all":return"Runs | All runs";case"failed":return"Runs | Failed";case"in-progress":return"Runs | In progress";case"queued":return"Runs | Queued";case"scheduled":return"Runs | Scheduled";default:return"Runs"}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,l.a)(F,{variables:{queuedFilter:(0,i._)((0,r._)({},e),{statuses:Array.from(y.sy)}),inProgressFilter:(0,i._)((0,r._)({},e),{statuses:Array.from(y.Ys)})}}),t=n.data,o=f.useMemo(function(){var e,n;return{queuedCount:(null==t?void 0:null===(e=t.queuedCount)||void 0===e?void 0:e.__typename)==="Runs"?t.queuedCount.count:null,inProgressCount:(null==t?void 0:null===(n=t.inProgressCount)||void 0===n?void 0:n.__typename)==="Runs"?t.inProgressCount.count:null}},[t]),a=o.queuedCount,h=o.inProgressCount,m=(0,s._)((0,k.oD)(),1)[0],p=S(m);(0,g.j)(C(p));var x=function(e){var n=m.filter(function(e){return"status"!==e.token}),t=e.map(function(e){return{token:"status",value:e}});return(0,k.it)((0,u._)(t).concat((0,u._)(n)))};return{tabs:(0,c.jsxs)(d.zH,{children:[(0,c.jsx)(T,{to:x([]),id:"all",$active:"all"===p,children:"All runs"}),(0,c.jsxs)(T,{to:x(Array.from(y.sy)),id:"queued",$active:"queued"===p,children:["Queued (",null!=a?a:"indeterminate",")"]}),(0,c.jsxs)(T,{to:x(Array.from(y.Ys)),id:"in-progress",$active:"in-progress"===p,children:["In progress (",null!=h?h:"indeterminate",")"]}),(0,c.jsx)(T,{to:x(Array.from(y.hd)),id:"failed",$active:"failed"===p,children:"Failed"}),(0,c.jsx)(T,{title:"Scheduled",to:"/runs/scheduled",id:"scheduled",$active:"scheduled"===p,children:"Scheduled"})]}),queryResult:n}},T=(0,j.ZP)(v.A).withConfig({componentId:"sc-8862b5f1-0"})(R(),function(e){return e.$active&&"\n    background: ".concat(h.w.Gray200,";\n  ")}),S=function(e){var n=(0,x.TH)().pathname;if("/runs/timeline"===n)return"timeline";if("/runs/scheduled"===n)return"scheduled";if("/overview/backfills"===n)return"backfills";var t=new Set(e.filter(function(e){return"status"===e.token}).map(function(e){return e.value}));return p()(y.sy,t)?"queued":p()(y.Ys,t)?"in-progress":p()(y.hd,t)?"failed":"all"},F=(0,a.Ps)(_())},36602:function(e,n,t){t.r(n),t.d(n,{ScheduledRunListRoot:function(){return ex},default:function(){return ej}});var r=t(73235),i=t(52322),s=t(40794),o=t(60138),u=t(98353),c=t(2736),l=t(51927),a=t(92914),d=t(47625),h=t(87323),m=t(2784),p=t(8848),f=t(87905),x=t(63757),j=t(48608),g=t(34503),v=t(7464),y=t(36057),k=t(81862),R=t(85333),_=t(6692),C=t(58467),w=t(82550),T=t(22970),S=t(3842),F=t(45),q=t(70399),b=t(12734),N=t(34706),E=t(91588),O=t(17577),P=t(55829),z=t(19369),$=t(13720),A=t(80572),I=t(19126),J=t.n(I),U=t(47933),H=t(35505),Q=t(67953),V=t(14590),Y=t(99339),Z=t(7334),K=t(24651),L=t(56918),G=t(40543),B=t(33667),D=t(30895),M=t(41060),W=t(30082);function X(){var e=(0,r._)(["\n  fragment ScheduleNextFiveTicksFragment on Schedule {\n    id\n    name\n    executionTimezone\n    mode\n    solidSelection\n    pipelineName\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(limit: 5) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]);return X=function(){return e},e}function ee(){var e=(0,r._)(["\n  fragment RepositoryForNextTicksFragment on Repository {\n    name\n    id\n    location {\n      id\n      name\n    }\n    schedules {\n      id\n      ...ScheduleNextFiveTicksFragment\n    }\n  }\n\n  ","\n"]);return ee=function(){return e},e}function en(){var e=(0,r._)(["\n  query ScheduleTickConfigQuery($scheduleSelector: ScheduleSelector!, $tickTimestamp: Int!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        futureTick(tickTimestamp: $tickTimestamp) {\n          evaluationResult {\n            ...ScheduleFutureTickEvaluationResult\n          }\n        }\n      }\n    }\n  }\n\n  fragment ScheduleFutureTickEvaluationResult on TickEvaluation {\n    runRequests {\n      ...ScheduleFutureTickRunRequest\n    }\n    skipReason\n    error {\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment ScheduleFutureTickRunRequest on RunRequest {\n    runKey\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n  }\n\n  ","\n"]);return en=function(){return e},e}function et(){var e=(0,r._)(["\n  font-size: 13px;\n"]);return et=function(){return e},e}function er(){var e=(0,r._)(["\n  background-color: #fdfcf2;\n  border: 1px solid ",";\n  border-radius: 3px;\n"]);return er=function(){return e},e}var ei=m.memo(function(e){var n=e.repos,t=[],r=!1,s=!1,o=(0,B.vl)().options;return(n.forEach(function(e){var n,i=e.schedules;s=s||i.length>0;var o={name:e.name,location:e.location.name},u=i.filter(function(e){return e.futureTicks.results.length&&e.scheduleState.status===Z.ynu.RUNNING}),c=(n=Math).min.apply(n,(0,w._)(u.map(function(e){return e.futureTicks.results[e.futureTicks.results.length-1].timestamp})));u.forEach(function(e){e.futureTicks.results.forEach(function(n){n.timestamp<=c&&t.push({schedule:e,timestamp:n.timestamp,repoAddress:o})})}),r||(r=i.some(function(e){return!!e.mode}))}),t.sort(function(e,n){return e.timestamp-n.timestamp}),t.length)?(0,i.jsxs)(N.i,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{width:"260px"},children:"Timestamp"}),(0,i.jsx)("th",{style:{width:"30%"},children:"Schedule"}),(0,i.jsx)("th",{children:r?"Job / Pipeline":"Job"}),(0,i.jsx)("th",{children:"Metadata"})]})}),(0,i.jsx)("tbody",{children:t.map(function(e){var n=e.schedule,t=e.timestamp,r=e.repoAddress,s=(0,B.qz)(o,r);return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(W.v,{timestamp:t,timezone:n.executionTimezone,timeFormat:{showSeconds:!1,showTimezone:!0}})}),(0,i.jsx)("td",{children:(0,i.jsx)(U.rU,{to:(0,M.$U)(r,"/schedules/".concat(n.name)),children:n.name})}),(0,i.jsx)("td",{children:(0,i.jsx)(K.h,{pipelineName:n.pipelineName,pipelineHrefContext:r,isJob:!!s&&(0,B.E8)(s,n.pipelineName)})}),(0,i.jsx)("td",{children:(0,i.jsx)(es,{repoAddress:r,schedule:n,tickTimestamp:t})})]},"".concat(n.id,":").concat(t))})})]}):(0,i.jsx)(c.x,{padding:{vertical:32},children:(0,i.jsx)(F.t,{icon:"error",title:"No scheduled ticks",description:s?(0,i.jsxs)(i.Fragment,{children:["There are no running schedules."," ",(0,i.jsx)(U.rU,{to:"/overview/schedules",children:"Start a schedule"})," to see scheduled ticks."]}):(0,i.jsx)(i.Fragment,{children:"There are no schedules in this workspace. Create a running schedule to view its scheduled ticks."}),action:s?null:(0,i.jsx)(q.fr,{icon:(0,i.jsx)(b.JO,{name:"open_in_new"}),href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules",children:"View documentation"})})})}),es=m.memo(function(e){var n,t=e.repoAddress,r=e.schedule,s=e.tickTimestamp,o=(0,_._)((0,R._)({},(0,D.$)(t)),{scheduleName:r.name}),u=(0,C._)(m.useState(!1),2),c=u[0],l=u[1],a=(0,C._)((0,S.t)(ea,{variables:{scheduleSelector:o,tickTimestamp:s}}),2),d=a[0],h=a[1],p=h.called,f=h.loading,x=h.data,j=(null==x?void 0:null===(n=x.scheduleOrError)||void 0===n?void 0:n.__typename)==="Schedule"?x.scheduleOrError.futureTick.evaluationResult:null,g=p&&!f?(0,i.jsx)(eo,{repoAddress:t,schedule:r,loading:f,onItemOpen:l,evaluationResult:j}):(0,i.jsx)(E.$,{purpose:"body-text"});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(O.J,{content:(0,i.jsx)(P.v2,{children:g}),position:"bottom-right",onOpening:function(){p||d()},children:(0,i.jsx)(q.zx,{icon:(0,i.jsx)(b.JO,{name:"expand_more"})})}),(0,i.jsx)(eu,{repoAddress:t,isOpen:c,setOpen:l,schedule:r,tickTimestamp:s,evaluationResult:j})]})}),eo=function(e){var n=e.repoAddress,t=e.schedule,r=e.evaluationResult,s=e.loading,o=e.onItemOpen;if(!r)return(0,i.jsx)(P.sN,{text:"Could not preview tick for this schedule"});if(r.skipReason)return(0,i.jsx)(P.sN,{text:"View skip reason...",onClick:function(){return o(!0)}});if(r.error)return(0,i.jsx)(P.sN,{text:"View error...",onClick:function(){return o(!0)}});if(!r.runRequests||!r.runRequests.length)return(0,i.jsx)(P.sN,{text:"No runs requested for this projected schedule tick"});if(1===r.runRequests.length){var u=r.runRequests[0],c=u?u.runConfigYaml:"";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P.sN,{text:s?"Loading Configuration...":"View Configuration...",icon:"open_in_new",onClick:function(){return o(!0)}}),(0,i.jsx)(G.U,{text:"Open in Launchpad...",icon:"edit",target:"_blank",to:(0,M.$U)(n,"/pipeline_or_job/".concat(t.pipelineName,"/playground/setup?").concat(J().stringify({mode:t.mode,config:c,solidSelection:t.solidSelection})))})]})}return(0,i.jsx)(P.sN,{text:"View ".concat(r.runRequests.length," run requests..."),icon:"edit",target:"_blank",onClick:function(){return o(!0)}})},eu=function(e){var n,t=e.repoAddress,r=e.evaluationResult,s=e.schedule,o=e.tickTimestamp,u=e.setOpen,l=e.isOpen,p=(0,C._)(m.useState(r&&r.runRequests&&1===r.runRequests.length?r.runRequests[0]:null),2),f=p[0],x=p[1],j=(0,Y.m)(),g=(0,B.Ux)(t),v=(0,B.E8)(g,s.pipelineName);m.useEffect(function(){r&&r.runRequests&&1===r.runRequests.length&&x(r.runRequests[0])},[r]);var y=function(){x(null),u(!1)};return r?f?n=(0,i.jsxs)(c.x,{flex:{direction:"column",gap:20},children:[(0,i.jsxs)(c.x,{flex:{direction:"column",gap:12},padding:{top:16,horizontal:24},children:[(0,i.jsx)(z.pm,{children:"Tags"}),f.tags.length?(0,i.jsx)(L.Q,{tags:f.tags,mode:v?null:s.mode}):null]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.x,{border:{side:"bottom",width:1,color:h.w.KeylineGray},padding:{left:24,bottom:16},children:(0,i.jsx)(z.pm,{children:"Config"})}),(0,i.jsx)($.NU,{value:f.runConfigYaml,options:{lineNumbers:!0,mode:"yaml"}})]})]}):r.error?n=(0,i.jsx)(A.a7,{children:(0,i.jsx)(V.T9,{error:r.error})}):r.skipReason?n=(0,i.jsx)(A.a7,{children:(0,i.jsx)(eh,{children:r.skipReason})}):r.runRequests&&(n=(0,i.jsx)(A.a7,{children:(0,i.jsx)(ed,{children:(0,i.jsxs)(N.i,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Run key"}),(0,i.jsx)("th",{children:"Config"}),(0,i.jsx)("th",{children:"Actions"})]})}),(0,i.jsx)("tbody",{children:r.runRequests.map(function(e,n){return e?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.runKey||(0,i.jsx)("span",{children:"—"})}),(0,i.jsx)("td",{children:(0,i.jsx)(d.Z,{onClick:function(){return x(e)},underline:!1,children:(0,i.jsxs)(a.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,i.jsx)(b.JO,{name:"open_in_new",color:h.w.Gray400}),(0,i.jsx)("span",{children:"View config"})]})})}),(0,i.jsx)("td",{children:(0,i.jsx)(O.J,{content:(0,i.jsx)(P.v2,{children:(0,i.jsx)(G.U,{text:"Open in Launchpad...",icon:"edit",target:"_blank",to:(0,M.$U)(t,"/".concat(v?"jobs":"pipelines","/").concat(s.pipelineName,"/playground/setup?").concat(J().stringify({mode:s.mode,config:e.runConfigYaml,solidSelection:s.solidSelection})))})}),position:"bottom",children:(0,i.jsx)(q.zx,{icon:(0,i.jsx)(b.JO,{name:"expand_more"})})})})]},n):null})})]})})})):n=null,(0,i.jsxs)(A.Vq,{onClose:function(){return y()},style:{width:"50vw"},title:(0,i.jsxs)(c.x,{flex:{direction:"row",gap:4},children:[(0,i.jsx)(W.v,{timestamp:o,timezone:s.executionTimezone}),(null==f?void 0:f.runKey)?(0,i.jsxs)("div",{children:[": ",null==f?void 0:f.runKey]}):null]}),isOpen:l,children:[n,(0,i.jsxs)(A.cN,{topBorder:!0,children:[f?(0,i.jsx)(q.zx,{autoFocus:!1,onClick:(0,k._)(function(){return(0,T.Jh)(this,function(e){switch(e.label){case 0:return j(f.runConfigYaml),[4,(0,Q.B7)({intent:"success",icon:"copy_to_clipboard_done",message:"Copied!"})];case 1:return e.sent(),[2]}})}),children:"Copy config"}):null,(0,i.jsx)(q.zx,{intent:"primary",autoFocus:!0,onClick:function(){return y()},children:"OK"})]})]})},ec=(0,o.Ps)(X()),el=(0,o.Ps)(ee(),ec),ea=(0,o.Ps)(en(),f.B),ed=H.ZP.div.withConfig({componentId:"sc-992e30a8-0"})(et()),eh=H.ZP.div.withConfig({componentId:"sc-992e30a8-1"})(er(),h.w.Yellow500),em=t(72171),ep=t(26977);function ef(){var e=(0,r._)(["\n  query ScheduledRunsListQuery {\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      ... on RepositoryConnection {\n        nodes {\n          id\n          ... on Repository {\n            id\n            ...RepositoryForNextTicksFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return ef=function(){return e},e}var ex=function(){(0,j.Px)(),(0,g.j)("Runs | Scheduled");var e=(0,s.a)(eg,{notifyOnNetworkStatusChange:!0}),n=(0,x.C4)(e,x.dT),t=(0,ep.zc)(),r=t.tabs,o=t.queryResult,m=(0,x.C4)(o,x.dT),f=(0,x.V5)(m,n);return(0,i.jsxs)(u.T,{children:[(0,i.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center",justifyContent:"space-between"},padding:{vertical:8,left:24,right:12},children:[r,(0,i.jsx)(x.xi,{refreshState:f})]}),(0,i.jsx)(em.g,{queryResult:e,allowStaleData:!0,children:function(e){var n=e.repositoriesOrError,t=e.instance;if("PythonError"===n.__typename){var r=n.message;return(0,i.jsx)(l.b,{intent:"warning",title:(0,i.jsxs)(a.Z,{direction:"row",spacing:4,children:[(0,i.jsx)("div",{children:"Could not load scheduled ticks."}),(0,i.jsx)(d.Z,{color:h.w.Link,underline:"always",onClick:function(){(0,p._)({title:"Python error",body:r})},children:"View error"})]})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.K,{daemonHealth:t.daemonHealth,padding:{vertical:16,horizontal:24}}),(0,i.jsx)(ei,{repos:n.nodes})]})}})]})},ej=ex,eg=(0,o.Ps)(ef(),v.O,el,f.B)},36057:function(e,n,t){t.d(n,{K:function(){return l}});var r=t(85333),i=t(6692),s=t(2281),o=t(52322),u=t(2736),c=t(51927);t(2784);var l=function(e){var n=e.daemonHealth,t=(0,s._)(e,["daemonHealth"]),l=void 0;if(n){var a=n.allDaemonStatuses.filter(function(e){return"SCHEDULER"===e.daemonType});if(a.length>0){var d=a[0];l=d.required&&d.healthy}}return!1===l?(0,o.jsx)(u.x,(0,i._)((0,r._)({},t),{children:(0,o.jsx)(c.b,{intent:"warning",title:"The scheduler daemon is not running.",description:(0,o.jsxs)("div",{children:["See the"," ",(0,o.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})})):null}},30082:function(e,n,t){t.d(n,{v:function(){return x}});var r=t(58467),i=t(73235),s=t(52322),o=t(12734),u=t(87323),c=t(42971),l=t(2784),a=t(35505),d=t(89356),h=t(8437),m=t(7832);function p(){var e=(0,i._)(["\n  font-variant-numeric: tabular-nums;\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  cursor: pointer;\n  position: relative;\n  top: 2px;\n  margin-left: 4px;\n"]);return f=function(){return e},e}var x=function(e){var n=e.timestamp,t=e.timezone,i=e.timeFormat,c=e.tooltipTimeFormat,a=l.useContext(d.JB),h=(0,r._)(a.timezone,1)[0],p=(0,r._)(a.hourCycle,1)[0],f=navigator.language,x=(0,m.j)({timestamp:{unix:n},locale:f,timezone:t||h,timeFormat:i,hourCycle:p});return(0,s.jsxs)("span",{children:[(0,s.jsx)(j,{style:{minWidth:0},title:x,children:x}),t&&t!==h?(0,s.jsx)(g,{placement:"top",content:(0,s.jsx)(j,{children:(0,m.j)({timestamp:{unix:n},locale:f,timezone:h,timeFormat:c})}),children:(0,s.jsx)(o.JO,{name:"schedule",color:u.w.Gray400,size:12})}):null]})};x.defaultProps={timeFormat:h._,tooltipTimeFormat:{showSeconds:!1,showTimezone:!0}};var j=a.ZP.span.withConfig({componentId:"sc-99dfeec2-0"})(p()),g=(0,a.ZP)(c.u).withConfig({componentId:"sc-99dfeec2-1"})(f())},72171:function(e,n,t){t.d(n,{T:function(){return d},g:function(){return a}});var r=t(58467),i=t(52322),s=t(2736),o=t(45),u=t(91588),c=t(2784),l=t(71212),a=function(e){var n=e.children,t=e.purpose,u=e.allowStaleData,a=e.renderError,h=e.queryResult,m=h.error,p=h.data,f=h.loading,x=(0,r._)(c.useState(!0),2),j=x[0],g=x[1],v=!p||f&&!(void 0!==u&&u)||0===Object.keys(p).length;if(c.useEffect(function(){var e;return v?e=setTimeout(function(){return g(!1)},500):g(!0),function(){e&&clearTimeout(e)}},[v]),m){if(a)return(0,i.jsx)(i.Fragment,{children:a(m)});var y=m.networkError;if(!y)return(0,i.jsx)(s.x,{padding:64,flex:{justifyContent:"center"},children:(0,i.jsx)(o.t,{icon:"error",title:"GraphQL Error - see console for details"})});if("statusCode"in y&&l.h.has(y.statusCode)){var k=y.statusCode;return(0,i.jsx)(s.x,{padding:64,flex:{justifyContent:"center"},children:(0,i.jsx)(o.t,{icon:"error",title:"Network error",description:(0,l.F)(k)})})}}return v?j?null:(0,i.jsx)(d,{purpose:t}):(0,i.jsx)(i.Fragment,{children:n(p)})},d=function(e){var n=e.purpose,t="page"===n;return(0,i.jsx)(s.x,{padding:64,flex:{grow:t?1:void 0,justifyContent:"center",alignItems:"center"},style:t?{height:"100%"}:void 0,children:(0,i.jsx)(u.$,{purpose:n})})};a.defaultProps={purpose:"page"}}}]);
//# sourceMappingURL=891.da2422e692a8d7f7.js.map