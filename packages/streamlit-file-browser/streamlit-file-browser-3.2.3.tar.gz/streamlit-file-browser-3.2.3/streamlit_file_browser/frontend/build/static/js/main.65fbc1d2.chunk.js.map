{"version":3,"sources":["actions.jsx","StFileBrowser.tsx","index.tsx"],"names":["Actions","props","selectedItems","isFolder","icons","nameFilter","canCreateFolder","onCreateFolder","canRenameFile","onRenameFile","canRenameFolder","onRenameFolder","canDeleteFile","onDeleteFile","canDownloadFile","canDeleteFolder","onDeleteFolder","onDownloadFile","canDownloadFolder","onDownloadFolder","canChooseFile","onChooseFile","canChooseFolder","onChooseFolder","actions","length","selectedItemsAction","filter","item","action","_toConsumableArray","Set","actionText","React","createElement","className","Loading","push","key","onClick","href","role","Folder","itemsWithoutKeyDerived","find","keyDerived","Rename","Delete","Download","aria-hidden","defaultProps","StreamlitEventType","noticeStreamlit","event","Streamlit","setComponentValue","FileBrowserStaticServer","_StreamlitComponentBa","_inherits","_super","_createSuper","_this","_classCallCheck","call","args","onResized","size","ajustHeight","render","IframeResizer","Object","assign","checkOrigin","autoResize","frameBorder","style","width","src","static_file_server_path","_createClass","value","revoke_step","setFrameHeight","this","path","window","addEventListener","_event$data","_event$data2","_event$data3","_event$data4","_event$data5","data","_event$data6","_event$data7","_event$data8","_event$data9","_event$data10","file","get","name","create_time","update_time","access_time","type","SELECT_FILE","target","SELECT_FOLDER","show_choose_file","CHOOSE_FILE","StreamlitComponentBase","FileBrowserNative","_StreamlitComponentBa2","_super2","_this2","folderOpenHandler","opts","folderCloseHandler","fileSelectedHandler","ignore_file_select_event","files","downlandHandler","keys","includes","forEach","_a$parentNode","url","URL","artifacts_download_site","toString","filename","substring","lastIndexOf","a","document","download","body","appendChild","click","parentNode","removeChild","DOWNLOAD","deleteFileHandler","fileKey","console","log","DELETE_FILE","remainingFiles","chooseHandler","convertFiles","map","modified","noop","Fragment","that","_assertThisInitialized","FileBrowser","showActionBar","canFilter","detailRenderer","Icons","FontAwesome","onFolderOpen","onFolderClose","onSelect","actionRenderer","_len","arguments","Array","_key","_objectSpread","show_download_file","show_delete_file","i","root","getElementById","height","Math","min","clientHeight","scrollHeight","offsetHeight","setTimeout","StreamlitFileBrowserNative","withStreamlitConnection","StreamlitFileBrowserStaticServer","FileBrowserWrapper","_StreamlitComponentBa3","_super3","_this3","ReactDOM","StrictMode","StFileBrowser"],"mappings":"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","file":"static/js/main.65fbc1d2.chunk.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst Actions = (props) => {\n  const {\n    selectedItems,\n    isFolder,\n    icons,\n    nameFilter,\n\n    canCreateFolder,\n    onCreateFolder,\n\n    canRenameFile,\n    onRenameFile,\n\n    canRenameFolder,\n    onRenameFolder,\n\n    canDeleteFile,\n    onDeleteFile,\n\n    canDeleteFolder,\n    onDeleteFolder,\n\n    canDownloadFile,\n    onDownloadFile,\n\n    canDownloadFolder,\n    onDownloadFolder,\n\n    canChooseFile,\n    onChooseFile,\n\n    canChooseFolder,\n    onChooseFolder,\n  } = props\n\n  /** @type any */\n  let actions = []\n\n  if (selectedItems.length) {\n    // Something is selected. Build custom actions depending on what it is.\n    const selectedItemsAction = selectedItems.filter(item => item.action)\n    if (selectedItemsAction.length === selectedItems.length && [...new Set(selectedItemsAction)].length === 1) {\n      // Selected item has an active action against it. Disable all other actions.\n      let actionText\n      switch (selectedItemsAction[0].action) {\n        case 'delete':\n          actionText = 'Deleting ...'\n          break\n\n        case 'rename':\n          actionText = 'Renaming ...'\n          break\n\n        default:\n          actionText = 'Moving ...'\n          break\n      }\n\n      actions = (\n        // TODO: Enable plugging in custom spinner.\n        <div className=\"item-actions\">\n          {icons.Loading} {actionText}\n        </div>\n      )\n    } else {\n      if (isFolder && canCreateFolder && !nameFilter) {\n        actions.push(\n          <li key=\"action-add-folder\">\n            <a\n              onClick={onCreateFolder}\n              href=\"#\"\n              role=\"button\"\n            >\n              {icons.Folder}\n              &nbsp;Add Subfolder\n            </a>\n          </li>\n        )\n      }\n\n      const itemsWithoutKeyDerived = selectedItems.find(item => !item.keyDerived)\n      if (!itemsWithoutKeyDerived && !isFolder && canRenameFile && selectedItems.length === 1) {\n        actions.push(\n          <li key=\"action-rename\">\n            <a\n              onClick={onRenameFile}\n              href=\"#\"\n              role=\"button\"\n            >\n              {icons.Rename}\n              &nbsp;Rename\n            </a>\n          </li>\n        )\n      } else if (!itemsWithoutKeyDerived && isFolder && canRenameFolder) {\n        actions.push(\n          <li key=\"action-rename\">\n            <a\n              onClick={onRenameFolder}\n              href=\"#\"\n              role=\"button\"\n            >\n              {icons.Rename}\n              &nbsp;Rename\n            </a>\n          </li>\n        )\n      }\n\n      if (!itemsWithoutKeyDerived && !isFolder && canDeleteFile) {\n        actions.push(\n          <li key=\"action-delete\">\n            <a\n              onClick={onDeleteFile}\n              href=\"#\"\n              role=\"button\"\n            >\n              {icons.Delete}\n              &nbsp;Delete\n            </a>\n          </li>\n        )\n      }\n      // else if (!itemsWithoutKeyDerived && isFolder && canDeleteFolder) {\n      //   actions.push(\n      //     <li key=\"action-delete\">\n      //       <a\n      //         onClick={onDeleteFolder}\n      //         href=\"#\"\n      //         role=\"button\"\n      //       >\n      //         {icons.Delete}\n      //         &nbsp;Delete\n      //       </a>\n      //     </li>\n      //   )\n      // }\n\n      if ((!isFolder && canDownloadFile) || (isFolder && canDownloadFolder)) {\n        actions.push(\n          <li key=\"action-download\">\n            <a\n              onClick={isFolder ? onDownloadFolder : onDownloadFile}\n              href=\"#\"\n              role=\"button\"\n            >\n              {icons.Download}\n              &nbsp;Download\n            </a>\n          </li>\n        )\n      }\n\n      if ((!isFolder && canChooseFile) || (isFolder && canChooseFolder)) {\n        actions.push(\n          <li key=\"action-choose\">\n            <a\n              onClick={isFolder ? onChooseFolder : onChooseFile}\n              href=\"#\"\n              role=\"button\"\n            >\n              <i className=\"fa fa-plus\" aria-hidden=\"true\" />\n              &nbsp;Choose\n            </a>\n          </li>\n        )\n      }\n\n      if (actions.length) {\n        actions = (<ul className=\"item-actions\">{actions}</ul>)\n      } else {\n        actions = (<div className=\"item-actions\">&nbsp;</div>)\n      }\n    }\n  } else {\n    // Nothing selected: We're in the 'root' folder. Only allowed action is adding a folder.\n    if (canCreateFolder && !nameFilter) {\n      actions.push(\n        <li key=\"action-add-folder\">\n          <a\n            onClick={onCreateFolder}\n            href=\"#\"\n            role=\"button\"\n          >\n            {icons.Folder}\n            &nbsp;Add Folder\n          </a>\n        </li>\n      )\n    }\n\n    if (actions.length) {\n      actions = (<ul className=\"item-actions\">{actions}</ul>)\n    } else {\n      actions = (<div className=\"item-actions\">&nbsp;</div>)\n    }\n  }\n\n  return actions\n}\n\nActions.propTypes = {\n  selectedItems: PropTypes.arrayOf(PropTypes.object),\n  isFolder: PropTypes.bool,\n  icons: PropTypes.object,\n  nameFilter: PropTypes.string,\n\n  canCreateFolder: PropTypes.bool,\n  onCreateFolder: PropTypes.func,\n\n  canRenameFile: PropTypes.bool,\n  onRenameFile: PropTypes.func,\n\n  canRenameFolder: PropTypes.bool,\n  onRenameFolder: PropTypes.func,\n\n  canDeleteFile: PropTypes.bool,\n  onDeleteFile: PropTypes.func,\n\n  canDeleteFolder: PropTypes.bool,\n  onDeleteFolder: PropTypes.func,\n\n  canDownloadFile: PropTypes.bool,\n  onDownloadFile: PropTypes.func,\n\n  canDownloadFolder: PropTypes.bool,\n  onDownloadFolder: PropTypes.func,\n\n  canChooseFile: PropTypes.bool,\n  onChooseFile: PropTypes.func,\n\n  canChooseFolder: PropTypes.bool,\n  onChooseFolder: PropTypes.func,\n}\n\nActions.defaultProps = {\n  selectedItems: [],\n  isFolder: false,\n  icons: {},\n  nameFilter: '',\n\n  canCreateFolder: false,\n  onCreateFolder: null,\n\n  canRenameFile: false,\n  onRenameFile: null,\n\n  canRenameFolder: false,\n  onRenameFolder: null,\n\n  canDeleteFile: false,\n  onDeleteFile: null,\n\n  canDeleteFolder: false,\n  onDeleteFolder: null,\n\n  canDownloadFile: false,\n  onDownloadFile: null,\n\n  canDownloadFolder: false,\n  onDownloadFolder: null,\n\n  canChooseFile: false,\n  onChooseFile: null,\n\n  canChooseFolder: false,\n  onChooseFolder: null,\n}\n\nexport default Actions\n","import React from \"react\"\nimport {\n  Streamlit,\n  StreamlitComponentBase,\n  withStreamlitConnection,\n  ComponentProps,\n} from \"streamlit-component-lib\"\nimport FileBrowser, {\n  Icons,\n  FileBrowserFile,\n  FileBrowserFolder,\n} from \"react-keyed-file-browser\"\n\nimport get from 'lodash.get'\nimport IframeResizer from 'iframe-resizer-react'\nimport Actions from \"./actions\"\nimport \"react-keyed-file-browser/dist/react-keyed-file-browser.css\"\nimport \"font-awesome/css/font-awesome.min.css\"\n\ninterface File {\n  path: string\n  name?: string\n  size?: number\n  create_time?: number\n  update_time?: number\n  access_time?: number\n}\n\nenum StreamlitEventType {\n  SELECT_FILE = \"SELECT_FILE\",\n  SELECT_FOLDER = \"SELECT_FOLDER\",\n  DOWNLOAD = \"DOWNLOAD\",\n  DELETE_FILE = \"DELETE_FILE\",\n  DELETE_FOLDER = \"DELETE_FOLDER\",\n  RENAME_FOLDER = \"RENAME_FOLDER\",\n  RENAME_FILE = \"RENAME_FILE\",\n  CREATE_FILE = \"CREATE_FILE\",\n  CREATE_FOLDER = \"CREATE_FOLDER\",\n  MOVE_FILE = \"MOVE_FILE\",\n  MOVE_FOLDER = \"MOVE_FOLDER\",\n  CHOOSE_FILE = \"CHOOSE_FILE\",\n}\n\ninterface StreamlitEvent {\n  type: StreamlitEventType\n  target: File | File[]\n}\n\ninterface State {\n  numClicks: number\n  isFocused: boolean\n}\n\ninterface IArgs {\n  files: File[]\n  path: string\n  artifacts_download_site: string\n  show_download_file: boolean\n  show_delete_file: boolean\n  show_choose_file: boolean\n  show_new_folder: boolean\n  show_upload_file: boolean\n  ignore_file_select_event: boolean\n  static_file_server_path: string\n}\n\nconst noticeStreamlit = (event: StreamlitEvent) =>\n  Streamlit.setComponentValue(event)\n\nclass FileBrowserStaticServer extends StreamlitComponentBase<State> {\n  private args: IArgs\n  \n  constructor(props: ComponentProps) {\n    super(props)\n    this.args = props.args\n  }\n\n  ajustHeight(revoke_step?: number) {\n    Streamlit.setFrameHeight()\n  }\n  \n  componentDidMount(): void {\n    const root = this.args.path\n    const args = this.args;\n    window.addEventListener('message', function(event) {\n      // console.log('从 iframe 中传递过来的点击事件:', event.data);\n      if (\n        event.data?.event === \"filebrowser_file_selected\" ||\n        event.data?.event === \"filebrowser_dir_selected\" ||\n        event.data?.event === \"filebrowser_file_double_selected\" ||\n        event.data?.event === \"filebrowser_path_changed\" ||\n        event.data?.event === \"filebrowser_file_choose\"\n      ) {\n        const file: File = {\n          path: get(event, 'data.data.file.path', ''),\n        }\n        get(event, 'data.data.file.name', '') && (file.name = get(event, 'data.data.file.name', ''))\n        get(event, 'data.data.file.size', 0) && (file.size = get(event, 'data.data.file.size', 0))\n        get(event, 'data.data.file.create_time', 0) && (file.create_time = get(event, 'data.data.file.create_time', 0))\n        get(event, 'data.data.file.update_time', 0) && (file.update_time = get(event, 'data.data.file.update_time', 0))\n        get(event, 'data.data.file.access_time', 0) && (file.access_time = get(event, 'data.data.file.access_time', 0))\n\n        event.data?.event === \"filebrowser_file_selected\" && noticeStreamlit({ type: StreamlitEventType.SELECT_FILE, target: file })\n        event.data?.event === \"filebrowser_dir_selected\" && noticeStreamlit({ type: StreamlitEventType.SELECT_FOLDER, target: file })\n        const { show_choose_file } = args;\n        event.data?.event === \"filebrowser_file_double_selected\" && show_choose_file && noticeStreamlit({ type: StreamlitEventType.CHOOSE_FILE, target: [file] })\n        event.data?.event === \"filebrowser_file_choose\" && show_choose_file && noticeStreamlit({ type: StreamlitEventType.CHOOSE_FILE, target: [file] })\n        event.data?.event === \"filebrowser_path_changed\" && noticeStreamlit({ type: StreamlitEventType.SELECT_FOLDER, target: file })\n      }\n    });\n    this.ajustHeight()\n  }\n\n  componentDidUpdate() {\n    this.ajustHeight()\n  }\n\n  onResized = (size: any) => {\n    this.ajustHeight()\n  }\n\n  public render = () => {\n    return (\n      <IframeResizer\n        {...this.args}\n        checkOrigin={false}\n        autoResize\n        onResized={this.onResized}\n        frameBorder={0}\n        style={{ width: '100%' }}\n        src={this.args.static_file_server_path}\n      />\n    )\n\n  }\n}\n  \nclass FileBrowserNative extends StreamlitComponentBase<State> {\n  private args: IArgs\n\n  constructor(props: ComponentProps) {\n    super(props)\n    this.args = props.args\n  }\n\n  ajustHeight(revoke_step?: number) {\n    const root = document.getElementById(\"root\")\n    if (root) {\n      const height = Math.min(\n        root.clientHeight,\n        root.scrollHeight,\n        root.offsetHeight\n      )\n      Streamlit.setFrameHeight(height - (revoke_step ? revoke_step : 0))\n      setTimeout(Streamlit.setFrameHeight, 1)\n    }\n  }\n\n  componentDidMount() {\n    this.ajustHeight()\n  }\n\n  componentDidUpdate() {\n    this.ajustHeight()\n  }\n\n  folderOpenHandler = (opts: FileBrowserFolder) => this.ajustHeight()\n  folderCloseHandler = (opts: FileBrowserFolder) => this.ajustHeight()\n\n  fileSelectedHandler = (opts: FileBrowserFile) => {\n    if (!this.args.ignore_file_select_event) {\n      const file = this.args.files.find((file) => file.path === opts.key)\n      file &&\n        noticeStreamlit({ type: StreamlitEventType.SELECT_FILE, target: file })\n    }\n  }\n\n  downlandHandler = (keys: string[]) => {\n    const files = this.args.files.filter((file) => keys.includes(file.path))\n    files.forEach((file) => {\n      let url = new URL(file.path, this.args.artifacts_download_site).toString()\n      let filename = url.substring(url.lastIndexOf(\"/\") + 1)\n      let a = document.createElement(\"a\")\n      a.target = \"_blank\"\n      a.href = url\n      a.download = filename\n      document.body.appendChild(a)\n      a.click()\n      a.parentNode?.removeChild(a)\n    })\n    files.length &&\n      noticeStreamlit({ type: StreamlitEventType.DOWNLOAD, target: files })\n  }\n\n  deleteFileHandler = (fileKey: string | string[]) => {\n    const files = this.args.files.filter((file) => typeof fileKey === 'string' ? fileKey === file.path : fileKey.includes(file.path))\n    console.log(\"deleteFileHandler\", \"key\", fileKey, \"files \", files)\n\n    files.length &&\n      noticeStreamlit({ type: StreamlitEventType.DELETE_FILE, target: files })\n\n    const remainingFiles = this.args.files.filter((file) => typeof fileKey === 'string' ? fileKey !== file.path : !fileKey.includes(file.path))\n    this.args.files = remainingFiles\n  }\n\n  chooseHandler = (keys: string[]) => {\n    const files = this.args.files.filter((file) => keys.includes(file.path))\n    files.length &&\n      noticeStreamlit({ type: StreamlitEventType.CHOOSE_FILE, target: files })\n  }\n\n  convertFiles = (files: File[]): FileBrowserFile[] =>\n    files.map((file) => ({\n      key: file.path,\n      modified: file.update_time || 0,\n      size: file.size || 0,\n    }))\n\n  noop = () => <></>\n  public render = () => {\n    let that = this\n    return (\n      <div>\n        <FileBrowser\n          {...this.args}\n          showActionBar\n          canFilter={true}\n          detailRenderer={this.noop}\n          icons={Icons.FontAwesome(4)}\n          files={this.convertFiles(this.args.files)}\n          onFolderOpen={this.folderOpenHandler}\n          onFolderClose={this.folderCloseHandler}\n          onSelect={this.fileSelectedHandler}\n          onDownloadFile={this.downlandHandler}\n          onDeleteFile={this.deleteFileHandler}\n          actionRenderer={(...args: any) => {\n            return Actions({\n              ...args[0],\n              ...{\n                canChooseFile: that.args.show_choose_file,\n                canDownloadFile:\n                  that.args.show_download_file &&\n                  that.args.artifacts_download_site,\n                canDeleteFile: that.args.show_delete_file,\n                onChooseFile: (keys: string[]) =>\n                  that.chooseHandler(\n                    args[0].selectedItems.map((i: any) => i.key)\n                  ),\n                onDeleteFile: (fileKey: string[]) =>\n                  that.deleteFileHandler(\n                      args[0].selectedItems.map((i: any) => i.key)\n                  ),\n              },\n            })\n          }}\n        />\n      </div>\n    )\n  }\n}\nconst StreamlitFileBrowserNative = withStreamlitConnection(FileBrowserNative)\nconst StreamlitFileBrowserStaticServer = withStreamlitConnection(FileBrowserStaticServer)\n\nclass FileBrowserWrapper extends StreamlitComponentBase<State> {\n  private args: IArgs\n  \n  constructor(props: ComponentProps) {\n    super(props)\n    this.args = props.args\n  }\n\n  public render(): React.ReactNode {\n    if (this.args.static_file_server_path) {\n      return (\n        <div>\n          <StreamlitFileBrowserStaticServer {...this.props} />\n        </div>\n      )\n    } else {\n      return (\n        <div>\n          <StreamlitFileBrowserNative {...this.props} />\n        </div>\n      )\n    }\n  }\n}\n\nexport default withStreamlitConnection(FileBrowserWrapper)\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport StFileBrowser from \"./StFileBrowser\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <StFileBrowser />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}