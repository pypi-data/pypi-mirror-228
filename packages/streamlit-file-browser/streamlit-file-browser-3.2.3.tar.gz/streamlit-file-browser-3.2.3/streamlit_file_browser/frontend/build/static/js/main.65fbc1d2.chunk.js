(this.webpackJsonpstreamlit_file_browser=this.webpackJsonpstreamlit_file_browser||[]).push([[0],{126:function(e,t,a){"use strict";a.r(t);var n=a(4),l=a.n(n),o=a(47),r=a.n(o),i=a(8),c=a(12),d=a(0),s=a(1),u=a(2),f=a(3),E=a(11),h=a(35),m=a.n(h),F=a(10),_=a.n(F),g=a(50),v=a(5),p=function(e){var t=e.selectedItems,a=e.isFolder,n=e.icons,o=e.nameFilter,r=e.canCreateFolder,i=e.onCreateFolder,c=e.canRenameFile,d=e.onRenameFile,s=e.canRenameFolder,u=e.onRenameFolder,f=e.canDeleteFile,E=e.onDeleteFile,h=(e.canDeleteFolder,e.onDeleteFolder,e.canDownloadFile),m=e.onDownloadFile,F=e.canDownloadFolder,_=e.onDownloadFolder,g=e.canChooseFile,p=e.onChooseFile,O=e.canChooseFolder,D=e.onChooseFolder,b=[];if(t.length){var L=t.filter((function(e){return e.action}));if(L.length===t.length&&1===Object(v.a)(new Set(L)).length){var w;switch(L[0].action){case"delete":w="Deleting ...";break;case"rename":w="Renaming ...";break;default:w="Moving ..."}b=l.a.createElement("div",{className:"item-actions"},n.Loading," ",w)}else{a&&r&&!o&&b.push(l.a.createElement("li",{key:"action-add-folder"},l.a.createElement("a",{onClick:i,href:"#",role:"button"},n.Folder,"\xa0Add Subfolder")));var C=t.find((function(e){return!e.keyDerived}));C||a||!c||1!==t.length?!C&&a&&s&&b.push(l.a.createElement("li",{key:"action-rename"},l.a.createElement("a",{onClick:u,href:"#",role:"button"},n.Rename,"\xa0Rename"))):b.push(l.a.createElement("li",{key:"action-rename"},l.a.createElement("a",{onClick:d,href:"#",role:"button"},n.Rename,"\xa0Rename"))),C||a||!f||b.push(l.a.createElement("li",{key:"action-delete"},l.a.createElement("a",{onClick:E,href:"#",role:"button"},n.Delete,"\xa0Delete"))),(!a&&h||a&&F)&&b.push(l.a.createElement("li",{key:"action-download"},l.a.createElement("a",{onClick:a?_:m,href:"#",role:"button"},n.Download,"\xa0Download"))),(!a&&g||a&&O)&&b.push(l.a.createElement("li",{key:"action-choose"},l.a.createElement("a",{onClick:a?D:p,href:"#",role:"button"},l.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}),"\xa0Choose"))),b=b.length?l.a.createElement("ul",{className:"item-actions"},b):l.a.createElement("div",{className:"item-actions"},"\xa0")}}else r&&!o&&b.push(l.a.createElement("li",{key:"action-add-folder"},l.a.createElement("a",{onClick:i,href:"#",role:"button"},n.Folder,"\xa0Add Folder"))),b=b.length?l.a.createElement("ul",{className:"item-actions"},b):l.a.createElement("div",{className:"item-actions"},"\xa0");return b};p.defaultProps={selectedItems:[],isFolder:!1,icons:{},nameFilter:"",canCreateFolder:!1,onCreateFolder:null,canRenameFile:!1,onRenameFile:null,canRenameFolder:!1,onRenameFolder:null,canDeleteFile:!1,onDeleteFile:null,canDeleteFolder:!1,onDeleteFolder:null,canDownloadFile:!1,onDownloadFile:null,canDownloadFolder:!1,onDownloadFolder:null,canChooseFile:!1,onChooseFile:null,canChooseFolder:!1,onChooseFolder:null};var O=p,D=(a(121),a(122),function(e){return e.SELECT_FILE="SELECT_FILE",e.SELECT_FOLDER="SELECT_FOLDER",e.DOWNLOAD="DOWNLOAD",e.DELETE_FILE="DELETE_FILE",e.DELETE_FOLDER="DELETE_FOLDER",e.RENAME_FOLDER="RENAME_FOLDER",e.RENAME_FILE="RENAME_FILE",e.CREATE_FILE="CREATE_FILE",e.CREATE_FOLDER="CREATE_FOLDER",e.MOVE_FILE="MOVE_FILE",e.MOVE_FOLDER="MOVE_FOLDER",e.CHOOSE_FILE="CHOOSE_FILE",e}(D||{})),b=function(e){return E.a.setComponentValue(e)},L=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).args=void 0,n.onResized=function(e){n.ajustHeight()},n.render=function(){return l.a.createElement(g.a,Object.assign({},n.args,{checkOrigin:!1,autoResize:!0,onResized:n.onResized,frameBorder:0,style:{width:"100%"},src:n.args.static_file_server_path}))},n.args=e.args,n}return Object(s.a)(a,[{key:"ajustHeight",value:function(e){E.a.setFrameHeight()}},{key:"componentDidMount",value:function(){this.args.path;var e=this.args;window.addEventListener("message",(function(t){var a,n,l,o,r;if("filebrowser_file_selected"===(null===(a=t.data)||void 0===a?void 0:a.event)||"filebrowser_dir_selected"===(null===(n=t.data)||void 0===n?void 0:n.event)||"filebrowser_file_double_selected"===(null===(l=t.data)||void 0===l?void 0:l.event)||"filebrowser_path_changed"===(null===(o=t.data)||void 0===o?void 0:o.event)||"filebrowser_file_choose"===(null===(r=t.data)||void 0===r?void 0:r.event)){var i,c,d,s,u,f={path:_()(t,"data.data.file.path","")};_()(t,"data.data.file.name","")&&(f.name=_()(t,"data.data.file.name","")),_()(t,"data.data.file.size",0)&&(f.size=_()(t,"data.data.file.size",0)),_()(t,"data.data.file.create_time",0)&&(f.create_time=_()(t,"data.data.file.create_time",0)),_()(t,"data.data.file.update_time",0)&&(f.update_time=_()(t,"data.data.file.update_time",0)),_()(t,"data.data.file.access_time",0)&&(f.access_time=_()(t,"data.data.file.access_time",0)),"filebrowser_file_selected"===(null===(i=t.data)||void 0===i?void 0:i.event)&&b({type:D.SELECT_FILE,target:f}),"filebrowser_dir_selected"===(null===(c=t.data)||void 0===c?void 0:c.event)&&b({type:D.SELECT_FOLDER,target:f});var E=e.show_choose_file;"filebrowser_file_double_selected"===(null===(d=t.data)||void 0===d?void 0:d.event)&&E&&b({type:D.CHOOSE_FILE,target:[f]}),"filebrowser_file_choose"===(null===(s=t.data)||void 0===s?void 0:s.event)&&E&&b({type:D.CHOOSE_FILE,target:[f]}),"filebrowser_path_changed"===(null===(u=t.data)||void 0===u?void 0:u.event)&&b({type:D.SELECT_FOLDER,target:f})}})),this.ajustHeight()}},{key:"componentDidUpdate",value:function(){this.ajustHeight()}}]),a}(E.b),w=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).args=void 0,n.folderOpenHandler=function(e){return n.ajustHeight()},n.folderCloseHandler=function(e){return n.ajustHeight()},n.fileSelectedHandler=function(e){if(!n.args.ignore_file_select_event){var t=n.args.files.find((function(t){return t.path===e.key}));t&&b({type:D.SELECT_FILE,target:t})}},n.downlandHandler=function(e){var t=n.args.files.filter((function(t){return e.includes(t.path)}));t.forEach((function(e){var t,a=new URL(e.path,n.args.artifacts_download_site).toString(),l=a.substring(a.lastIndexOf("/")+1),o=document.createElement("a");o.target="_blank",o.href=a,o.download=l,document.body.appendChild(o),o.click(),null===(t=o.parentNode)||void 0===t||t.removeChild(o)})),t.length&&b({type:D.DOWNLOAD,target:t})},n.deleteFileHandler=function(e){var t=n.args.files.filter((function(t){return"string"===typeof e?e===t.path:e.includes(t.path)}));console.log("deleteFileHandler","key",e,"files ",t),t.length&&b({type:D.DELETE_FILE,target:t});var a=n.args.files.filter((function(t){return"string"===typeof e?e!==t.path:!e.includes(t.path)}));n.args.files=a},n.chooseHandler=function(e){var t=n.args.files.filter((function(t){return e.includes(t.path)}));t.length&&b({type:D.CHOOSE_FILE,target:t})},n.convertFiles=function(e){return e.map((function(e){return{key:e.path,modified:e.update_time||0,size:e.size||0}}))},n.noop=function(){return l.a.createElement(l.a.Fragment,null)},n.render=function(){var e=Object(c.a)(n);return l.a.createElement("div",null,l.a.createElement(m.a,Object.assign({},n.args,{showActionBar:!0,canFilter:!0,detailRenderer:n.noop,icons:h.Icons.FontAwesome(4),files:n.convertFiles(n.args.files),onFolderOpen:n.folderOpenHandler,onFolderClose:n.folderCloseHandler,onSelect:n.fileSelectedHandler,onDownloadFile:n.downlandHandler,onDeleteFile:n.deleteFileHandler,actionRenderer:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return O(Object(i.a)(Object(i.a)({},a[0]),{canChooseFile:e.args.show_choose_file,canDownloadFile:e.args.show_download_file&&e.args.artifacts_download_site,canDeleteFile:e.args.show_delete_file,onChooseFile:function(t){return e.chooseHandler(a[0].selectedItems.map((function(e){return e.key})))},onDeleteFile:function(t){return e.deleteFileHandler(a[0].selectedItems.map((function(e){return e.key})))}}))}})))},n.args=e.args,n}return Object(s.a)(a,[{key:"ajustHeight",value:function(e){var t=document.getElementById("root");if(t){var a=Math.min(t.clientHeight,t.scrollHeight,t.offsetHeight);E.a.setFrameHeight(a-(e||0)),setTimeout(E.a.setFrameHeight,1)}}},{key:"componentDidMount",value:function(){this.ajustHeight()}},{key:"componentDidUpdate",value:function(){this.ajustHeight()}}]),a}(E.b),C=Object(E.c)(w),R=Object(E.c)(L),y=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).args=void 0,n.args=e.args,n}return Object(s.a)(a,[{key:"render",value:function(){return this.args.static_file_server_path?l.a.createElement("div",null,l.a.createElement(R,this.props)):l.a.createElement("div",null,l.a.createElement(C,this.props))}}]),a}(E.b),k=Object(E.c)(y);r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(k,null)),document.getElementById("root"))},54:function(e,t,a){e.exports=a(126)}},[[54,1,2]]]);
//# sourceMappingURL=main.65fbc1d2.chunk.js.map