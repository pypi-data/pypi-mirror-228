import{S as ee,i as te,s as le,E as D,k as H,a as q,l as L,m as w,c as G,h as c,F as ze,G as B,n as y,b as P,a0 as k,al as Ie,H as Y,g as V,v as Q,d as M,f as x,L as de,M as Le,N as W,ah as kt,Q as K,D as wt,I as St,J as Et,K as Tt,q as z,r as I,u as j,y as se,z as oe,A as re,B as fe,R as J,w as Nt,Z as F,_ as U,$,a1 as X,a7 as ve,V as yt,a2 as mt,a3 as Re,C as Ct,W as _t,X as Vt,p as ne,ag as Pt,an as Bt,a4 as At,O as De,ai as Ht,e as we,a8 as Oe}from"./index.8706e7a3.js";import{W as Lt,d as Mt,h as bt,a6 as Be,J as gt,X as vt,aE as zt,V as ge,K as ke,aF as It,U as Rt,a4 as Dt,B as pt,aU as Ot}from"./Commands.b285d8c6.js";import{A as Ye,f as Fe,I as Yt,w as Ft,x as Ut}from"./notificationsStore.d636816c.js";import{f as jt}from"./utils.ddc0b847.js";const Xt=i=>({}),Ue=i=>({});function je(i){let e,t,l,n;const f=i[20].labelText,r=wt(f,i,i[19],Ue),a=r||Wt(i);let s=i[5]&&Xe(i);return{c(){e=H("div"),t=H("label"),a&&a.c(),l=q(),s&&s.c(),this.h()},l(o){e=L(o,"DIV",{});var u=w(e);t=L(u,"LABEL",{for:!0});var d=w(t);a&&a.l(d),d.forEach(c),l=G(u),s&&s.l(u),u.forEach(c),this.h()},h(){y(t,"for",i[14]),B(t,"bx--label",!0),B(t,"bx--visually-hidden",i[11]),B(t,"bx--label--disabled",i[7]),B(e,"bx--text-area__label-wrapper",!0)},m(o,u){P(o,e,u),k(e,t),a&&a.m(t,null),k(e,l),s&&s.m(e,null),n=!0},p(o,u){r?r.p&&(!n||u[0]&524288)&&St(r,f,o,o[19],n?Tt(f,o[19],u,Xt):Et(o[19]),Ue):a&&a.p&&(!n||u[0]&1024)&&a.p(o,n?u:[-1,-1]),(!n||u[0]&16384)&&y(t,"for",o[14]),(!n||u[0]&2048)&&B(t,"bx--visually-hidden",o[11]),(!n||u[0]&128)&&B(t,"bx--label--disabled",o[7]),o[5]?s?s.p(o,u):(s=Xe(o),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(o){n||(V(a,o),n=!0)},o(o){M(a,o),n=!1},d(o){o&&c(e),a&&a.d(o),s&&s.d()}}}function Wt(i){let e;return{c(){e=z(i[10])},l(t){e=I(t,i[10])},m(t,l){P(t,e,l)},p(t,l){l[0]&1024&&j(e,t[10])},d(t){t&&c(e)}}}function Xe(i){let e,t=i[0].length+"",l,n,f;return{c(){e=H("div"),l=z(t),n=z("/"),f=z(i[5]),this.h()},l(r){e=L(r,"DIV",{});var a=w(e);l=I(a,t),n=I(a,"/"),f=I(a,i[5]),a.forEach(c),this.h()},h(){B(e,"bx--label",!0),B(e,"bx--label--disabled",i[7])},m(r,a){P(r,e,a),k(e,l),k(e,n),k(e,f)},p(r,a){a[0]&1&&t!==(t=r[0].length+"")&&j(l,t),a[0]&32&&j(f,r[5]),a[0]&128&&B(e,"bx--label--disabled",r[7])},d(r){r&&c(e)}}}function We(i){let e,t;return e=new Lt({props:{class:"bx--text-area__invalid-icon"}}),{c(){se(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){fe(e,l)}}}function qe(i){let e,t;return{c(){e=H("div"),t=z(i[9]),this.h()},l(l){e=L(l,"DIV",{});var n=w(e);t=I(n,i[9]),n.forEach(c),this.h()},h(){B(e,"bx--form__helper-text",!0),B(e,"bx--form__helper-text--disabled",i[7])},m(l,n){P(l,e,n),k(e,t)},p(l,n){n[0]&512&&j(t,l[9]),n[0]&128&&B(e,"bx--form__helper-text--disabled",l[7])},d(l){l&&c(e)}}}function Ge(i){let e,t;return{c(){e=H("div"),t=z(i[13]),this.h()},l(l){e=L(l,"DIV",{id:!0});var n=w(e);t=I(n,i[13]),n.forEach(c),this.h()},h(){y(e,"id",i[16]),B(e,"bx--form-requirement",!0)},m(l,n){P(l,e,n),k(e,t)},p(l,n){n[0]&8192&&j(t,l[13]),n[0]&65536&&y(e,"id",l[16])},d(l){l&&c(e)}}}function qt(i){let e,t,l,n,f,r,a,s,o,u,d,h,b,T,m=(i[10]||i[17].labelText)&&!i[11]&&je(i),g=i[12]&&We(),N=[{"aria-invalid":r=i[12]||void 0},{"aria-describedby":a=i[12]?i[16]:void 0},{disabled:i[7]},{id:i[14]},{name:i[15]},{cols:i[3]},{rows:i[4]},{placeholder:i[2]},{readOnly:i[8]},{maxlength:s=i[5]??void 0},i[18]],A={};for(let v=0;v<N.length;v+=1)A=D(A,N[v]);let E=!i[12]&&i[9]&&qe(i),C=i[12]&&Ge(i);return{c(){e=H("div"),m&&m.c(),t=q(),l=H("div"),g&&g.c(),n=q(),f=H("textarea"),u=q(),E&&E.c(),d=q(),C&&C.c(),this.h()},l(v){e=L(v,"DIV",{});var S=w(e);m&&m.l(S),t=G(S),l=L(S,"DIV",{"data-invalid":!0});var O=w(l);g&&g.l(O),n=G(O),f=L(O,"TEXTAREA",{"aria-invalid":!0,"aria-describedby":!0,id:!0,name:!0,cols:!0,rows:!0,placeholder:!0,maxlength:!0}),w(f).forEach(c),O.forEach(c),u=G(S),E&&E.l(S),d=G(S),C&&C.l(S),S.forEach(c),this.h()},h(){ze(f,A),B(f,"bx--text-area",!0),B(f,"bx--text-area--light",i[6]),B(f,"bx--text-area--invalid",i[12]),y(l,"data-invalid",o=i[12]||void 0),B(l,"bx--text-area__wrapper",!0),B(e,"bx--form-item",!0)},m(v,S){P(v,e,S),m&&m.m(e,null),k(e,t),k(e,l),g&&g.m(l,null),k(l,n),k(l,f),f.autofocus&&f.focus(),i[32](f),Ie(f,i[0]),k(e,u),E&&E.m(e,null),k(e,d),C&&C.m(e,null),h=!0,b||(T=[Y(f,"input",i[33]),Y(f,"change",i[25]),Y(f,"input",i[26]),Y(f,"keydown",i[27]),Y(f,"keyup",i[28]),Y(f,"focus",i[29]),Y(f,"blur",i[30]),Y(f,"paste",i[31]),Y(e,"click",i[21]),Y(e,"mouseover",i[22]),Y(e,"mouseenter",i[23]),Y(e,"mouseleave",i[24])],b=!0)},p(v,S){(v[10]||v[17].labelText)&&!v[11]?m?(m.p(v,S),S[0]&134144&&V(m,1)):(m=je(v),m.c(),V(m,1),m.m(e,t)):m&&(Q(),M(m,1,1,()=>{m=null}),x()),v[12]?g?S[0]&4096&&V(g,1):(g=We(),g.c(),V(g,1),g.m(l,n)):g&&(Q(),M(g,1,1,()=>{g=null}),x()),ze(f,A=de(N,[(!h||S[0]&4096&&r!==(r=v[12]||void 0))&&{"aria-invalid":r},(!h||S[0]&69632&&a!==(a=v[12]?v[16]:void 0))&&{"aria-describedby":a},(!h||S[0]&128)&&{disabled:v[7]},(!h||S[0]&16384)&&{id:v[14]},(!h||S[0]&32768)&&{name:v[15]},(!h||S[0]&8)&&{cols:v[3]},(!h||S[0]&16)&&{rows:v[4]},(!h||S[0]&4)&&{placeholder:v[2]},(!h||S[0]&256)&&{readOnly:v[8]},(!h||S[0]&32&&s!==(s=v[5]??void 0))&&{maxlength:s},S[0]&262144&&v[18]])),S[0]&1&&Ie(f,v[0]),B(f,"bx--text-area",!0),B(f,"bx--text-area--light",v[6]),B(f,"bx--text-area--invalid",v[12]),(!h||S[0]&4096&&o!==(o=v[12]||void 0))&&y(l,"data-invalid",o),!v[12]&&v[9]?E?E.p(v,S):(E=qe(v),E.c(),E.m(e,d)):E&&(E.d(1),E=null),v[12]?C?C.p(v,S):(C=Ge(v),C.c(),C.m(e,null)):C&&(C.d(1),C=null)},i(v){h||(V(m),V(g),h=!0)},o(v){M(m),M(g),h=!1},d(v){v&&c(e),m&&m.d(),g&&g.d(),i[32](null),E&&E.d(),C&&C.d(),b=!1,Le(T)}}}function Gt(i,e,t){let l;const n=["value","placeholder","cols","rows","maxCount","light","disabled","readonly","helperText","labelText","hideLabel","invalid","invalidText","id","name","ref"];let f=W(e,n),{$$slots:r={},$$scope:a}=e;const s=kt(r);let{value:o=""}=e,{placeholder:u=""}=e,{cols:d=50}=e,{rows:h=4}=e,{maxCount:b=void 0}=e,{light:T=!1}=e,{disabled:m=!1}=e,{readonly:g=!1}=e,{helperText:N=""}=e,{labelText:A=""}=e,{hideLabel:E=!1}=e,{invalid:C=!1}=e,{invalidText:v=""}=e,{id:S="ccs-"+Math.random().toString(36)}=e,{name:O=void 0}=e,{ref:Z=null}=e;function ae(_){J.call(this,i,_)}function he(_){J.call(this,i,_)}function ie(_){J.call(this,i,_)}function ue(_){J.call(this,i,_)}function ce(_){J.call(this,i,_)}function Se(_){J.call(this,i,_)}function Ee(_){J.call(this,i,_)}function Te(_){J.call(this,i,_)}function Ne(_){J.call(this,i,_)}function ye(_){J.call(this,i,_)}function Ce(_){J.call(this,i,_)}function p(_){Nt[_?"unshift":"push"](()=>{Z=_,t(1,Z)})}function R(){o=this.value,t(0,o)}return i.$$set=_=>{e=D(D({},e),K(_)),t(18,f=W(e,n)),"value"in _&&t(0,o=_.value),"placeholder"in _&&t(2,u=_.placeholder),"cols"in _&&t(3,d=_.cols),"rows"in _&&t(4,h=_.rows),"maxCount"in _&&t(5,b=_.maxCount),"light"in _&&t(6,T=_.light),"disabled"in _&&t(7,m=_.disabled),"readonly"in _&&t(8,g=_.readonly),"helperText"in _&&t(9,N=_.helperText),"labelText"in _&&t(10,A=_.labelText),"hideLabel"in _&&t(11,E=_.hideLabel),"invalid"in _&&t(12,C=_.invalid),"invalidText"in _&&t(13,v=_.invalidText),"id"in _&&t(14,S=_.id),"name"in _&&t(15,O=_.name),"ref"in _&&t(1,Z=_.ref),"$$scope"in _&&t(19,a=_.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&16384&&t(16,l=`error-${S}`)},[o,Z,u,d,h,b,T,m,g,N,A,E,C,v,S,O,l,s,f,a,r,ae,he,ie,ue,ce,Se,Ee,Te,Ne,ye,Ce,p,R]}class Zt extends ee{constructor(e){super(),te(this,e,Gt,qt,le,{value:0,placeholder:2,cols:3,rows:4,maxCount:5,light:6,disabled:7,readonly:8,helperText:9,labelText:10,hideLabel:11,invalid:12,invalidText:13,id:14,name:15,ref:1},null,[-1,-1])}}const Yl=Zt;function Ze(i){let e,t;return{c(){e=F("title"),t=z(i[1])},l(l){e=U(l,"title",{});var n=w(e);t=I(n,i[1]),n.forEach(c)},m(l,n){P(l,e,n),k(e,t)},p(l,n){n&2&&j(t,l[1])},d(l){l&&c(e)}}}function Kt(i){let e,t,l=i[1]&&Ze(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let r=0;r<n.length;r+=1)f=D(f,n[r]);return{c(){e=F("svg"),l&&l.c(),t=F("path"),this.h()},l(r){e=U(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=w(e);l&&l.l(a),t=U(a,"path",{d:!0}),w(t).forEach(c),a.forEach(c),this.h()},h(){y(t,"d","M24.59 16.59L17 24.17 17 4 15 4 15 24.17 7.41 16.59 6 18 16 28 26 18 24.59 16.59z"),$(e,f)},m(r,a){P(r,e,a),l&&l.m(e,null),k(e,t)},p(r,[a]){r[1]?l?l.p(r,a):(l=Ze(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),$(e,f=de(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:r[0]},a&1&&{height:r[0]},a&4&&r[2],a&8&&r[3]]))},i:X,o:X,d(r){r&&c(e),l&&l.d()}}}function Jt(i,e,t){let l,n;const f=["size","title"];let r=W(e,f),{size:a=16}=e,{title:s=void 0}=e;return i.$$set=o=>{t(5,e=D(D({},e),K(o))),t(3,r=W(e,f)),"size"in o&&t(0,a=o.size),"title"in o&&t(1,s=o.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||s),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=K(e),[a,s,n,r,l]}class Qt extends ee{constructor(e){super(),te(this,e,Jt,Kt,le,{size:0,title:1})}}function Ke(i){let e,t;return{c(){e=F("title"),t=z(i[1])},l(l){e=U(l,"title",{});var n=w(e);t=I(n,i[1]),n.forEach(c)},m(l,n){P(l,e,n),k(e,t)},p(l,n){n&2&&j(t,l[1])},d(l){l&&c(e)}}}function xt(i){let e,t,l=i[1]&&Ke(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let r=0;r<n.length;r+=1)f=D(f,n[r]);return{c(){e=F("svg"),l&&l.c(),t=F("path"),this.h()},l(r){e=U(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=w(e);l&&l.l(a),t=U(a,"path",{d:!0}),w(t).forEach(c),a.forEach(c),this.h()},h(){y(t,"d","M16 4L6 14 7.41 15.41 15 7.83 15 28 17 28 17 7.83 24.59 15.41 26 14 16 4z"),$(e,f)},m(r,a){P(r,e,a),l&&l.m(e,null),k(e,t)},p(r,[a]){r[1]?l?l.p(r,a):(l=Ke(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),$(e,f=de(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:r[0]},a&1&&{height:r[0]},a&4&&r[2],a&8&&r[3]]))},i:X,o:X,d(r){r&&c(e),l&&l.d()}}}function $t(i,e,t){let l,n;const f=["size","title"];let r=W(e,f),{size:a=16}=e,{title:s=void 0}=e;return i.$$set=o=>{t(5,e=D(D({},e),K(o))),t(3,r=W(e,f)),"size"in o&&t(0,a=o.size),"title"in o&&t(1,s=o.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||s),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=K(e),[a,s,n,r,l]}class el extends ee{constructor(e){super(),te(this,e,$t,xt,le,{size:0,title:1})}}function Je(i){let e,t;return{c(){e=F("title"),t=z(i[1])},l(l){e=U(l,"title",{});var n=w(e);t=I(n,i[1]),n.forEach(c)},m(l,n){P(l,e,n),k(e,t)},p(l,n){n&2&&j(t,l[1])},d(l){l&&c(e)}}}function tl(i){let e,t,l=i[1]&&Je(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let r=0;r<n.length;r+=1)f=D(f,n[r]);return{c(){e=F("svg"),l&&l.c(),t=F("path"),this.h()},l(r){e=U(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=w(e);l&&l.l(a),t=U(a,"path",{d:!0}),w(t).forEach(c),a.forEach(c),this.h()},h(){y(t,"d","M2 2H7V16H2zM23 2H9V16.8027l3.0422 4.5635.8453 5.9165A2.0094 2.0094 0 0014.8672 29H15a3.0033 3.0033 0 003-3V20h8a4.0045 4.0045 0 004-4V9A7.0078 7.0078 0 0023 2z"),$(e,f)},m(r,a){P(r,e,a),l&&l.m(e,null),k(e,t)},p(r,[a]){r[1]?l?l.p(r,a):(l=Je(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),$(e,f=de(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:r[0]},a&1&&{height:r[0]},a&4&&r[2],a&8&&r[3]]))},i:X,o:X,d(r){r&&c(e),l&&l.d()}}}function ll(i,e,t){let l,n;const f=["size","title"];let r=W(e,f),{size:a=16}=e,{title:s=void 0}=e;return i.$$set=o=>{t(5,e=D(D({},e),K(o))),t(3,r=W(e,f)),"size"in o&&t(0,a=o.size),"title"in o&&t(1,s=o.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||s),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=K(e),[a,s,n,r,l]}class il extends ee{constructor(e){super(),te(this,e,ll,tl,le,{size:0,title:1})}}function Qe(i){let e,t;return{c(){e=F("title"),t=z(i[1])},l(l){e=U(l,"title",{});var n=w(e);t=I(n,i[1]),n.forEach(c)},m(l,n){P(l,e,n),k(e,t)},p(l,n){n&2&&j(t,l[1])},d(l){l&&c(e)}}}function nl(i){let e,t,l=i[1]&&Qe(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let r=0;r<n.length;r+=1)f=D(f,n[r]);return{c(){e=F("svg"),l&&l.c(),t=F("path"),this.h()},l(r){e=U(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=w(e);l&&l.l(a),t=U(a,"path",{d:!0}),w(t).forEach(c),a.forEach(c),this.h()},h(){y(t,"d","M2 16H7V30H2zM23 30H9V15.1973l3.0422-4.5635.8453-5.9165A2.0094 2.0094 0 0114.8672 3H15a3.0033 3.0033 0 013 3v6h8a4.0045 4.0045 0 014 4v7A7.0078 7.0078 0 0123 30z"),$(e,f)},m(r,a){P(r,e,a),l&&l.m(e,null),k(e,t)},p(r,[a]){r[1]?l?l.p(r,a):(l=Qe(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),$(e,f=de(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:r[0]},a&1&&{height:r[0]},a&4&&r[2],a&8&&r[3]]))},i:X,o:X,d(r){r&&c(e),l&&l.d()}}}function al(i,e,t){let l,n;const f=["size","title"];let r=W(e,f),{size:a=16}=e,{title:s=void 0}=e;return i.$$set=o=>{t(5,e=D(D({},e),K(o))),t(3,r=W(e,f)),"size"in o&&t(0,a=o.size),"title"in o&&t(1,s=o.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||s),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=K(e),[a,s,n,r,l]}class sl extends ee{constructor(e){super(),te(this,e,al,nl,le,{size:0,title:1})}}function xe(i){let e,t;return{c(){e=F("title"),t=z(i[1])},l(l){e=U(l,"title",{});var n=w(e);t=I(n,i[1]),n.forEach(c)},m(l,n){P(l,e,n),k(e,t)},p(l,n){n&2&&j(t,l[1])},d(l){l&&c(e)}}}function ol(i){let e,t,l,n=i[1]&&xe(i),f=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],r={};for(let a=0;a<f.length;a+=1)r=D(r,f[a]);return{c(){e=F("svg"),n&&n.c(),t=F("path"),l=F("path"),this.h()},l(a){e=U(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=w(e);n&&n.l(s),t=U(s,"path",{d:!0}),w(t).forEach(c),l=U(s,"path",{d:!0}),w(l).forEach(c),s.forEach(c),this.h()},h(){y(t,"d","M30.94,15.66A16.69,16.69,0,0,0,16,5,16.69,16.69,0,0,0,1.06,15.66a1,1,0,0,0,0,.68A16.69,16.69,0,0,0,16,27,16.69,16.69,0,0,0,30.94,16.34,1,1,0,0,0,30.94,15.66ZM16,25c-5.3,0-10.9-3.93-12.93-9C5.1,10.93,10.7,7,16,7s10.9,3.93,12.93,9C26.9,21.07,21.3,25,16,25Z"),y(l,"d","M16,10a6,6,0,1,0,6,6A6,6,0,0,0,16,10Zm0,10a4,4,0,1,1,4-4A4,4,0,0,1,16,20Z"),$(e,r)},m(a,s){P(a,e,s),n&&n.m(e,null),k(e,t),k(e,l)},p(a,[s]){a[1]?n?n.p(a,s):(n=xe(a),n.c(),n.m(e,t)):n&&(n.d(1),n=null),$(e,r=de(f,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:a[0]},s&1&&{height:a[0]},s&4&&a[2],s&8&&a[3]]))},i:X,o:X,d(a){a&&c(e),n&&n.d()}}}function rl(i,e,t){let l,n;const f=["size","title"];let r=W(e,f),{size:a=16}=e,{title:s=void 0}=e;return i.$$set=o=>{t(5,e=D(D({},e),K(o))),t(3,r=W(e,f)),"size"in o&&t(0,a=o.size),"title"in o&&t(1,s=o.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||s),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=K(e),[a,s,n,r,l]}class Fl extends ee{constructor(e){super(),te(this,e,rl,ol,le,{size:0,title:1})}}function fl(i,e){const t=l=>i&&!i.contains(l.target)&&!l.defaultPrevented&&e();return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function ul(i){let e=(i[1]?"":i[0])+"",t;return{c(){t=z(e)},l(l){t=I(l,e)},m(l,n){P(l,t,n)},p(l,n){n&3&&e!==(e=(l[1]?"":l[0])+"")&&j(t,e)},d(l){l&&c(t)}}}function dl(i){let e,t,l,n,f;const r=[i[2],{type:"purple"},{icon:Ye}];let a={$$slots:{default:[ul]},$$scope:{ctx:i}};for(let s=0;s<r.length;s+=1)a=D(a,r[s]);return t=new Mt({props:a}),{c(){e=H("div"),se(t.$$.fragment),this.h()},l(s){e=L(s,"DIV",{class:!0});var o=w(e);oe(t.$$.fragment,o),o.forEach(c),this.h()},h(){y(e,"class","embedding-badge truncate"),B(e,"embedding-badge-nolabel",i[1])},m(s,o){P(s,e,o),re(t,e,null),l=!0,n||(f=ve(bt.call(null,e,{text:"Embedding index"})),n=!0)},p(s,[o]){const u=o&4?de(r,[o&4&&yt(s[2]),r[1],o&0&&{icon:Ye}]):{};o&11&&(u.$$scope={dirty:o,ctx:s}),t.$set(u),(!l||o&2)&&B(e,"embedding-badge-nolabel",s[1])},i(s){l||(V(t.$$.fragment,s),l=!0)},o(s){M(t.$$.fragment,s),l=!1},d(s){s&&c(e),fe(t),n=!1,f()}}}function cl(i,e,t){const l=["embedding","hideEmbeddingName"];let n=W(e,l),{embedding:f}=e,{hideEmbeddingName:r=!1}=e;return i.$$set=a=>{e=D(D({},e),K(a)),t(2,n=W(e,l)),"embedding"in a&&t(0,f=a.embedding),"hideEmbeddingName"in a&&t(1,r=a.hideEmbeddingName)},[f,r,n]}class hl extends ee{constructor(e){super(),te(this,e,cl,dl,le,{embedding:0,hideEmbeddingName:1})}}function $e(i,e,t){const l=i.slice();return l[12]=e[t],l}function et(i){let e,t,l=i[0].conceptNamespace+"",n,f,r=i[0].conceptName+"",a,s,o,u,d,h,b,T,m,g,N;return d=new sl({}),T=new il({}),{c(){e=H("div"),t=H("div"),n=z(l),f=z(" / "),a=z(r),s=q(),o=H("div"),u=H("button"),se(d.$$.fragment),h=q(),b=H("button"),se(T.$$.fragment),this.h()},l(A){e=L(A,"DIV",{class:!0});var E=w(e);t=L(E,"DIV",{class:!0});var C=w(t);n=I(C,l),f=I(C," / "),a=I(C,r),C.forEach(c),s=G(E),o=L(E,"DIV",{class:!0});var v=w(o);u=L(v,"BUTTON",{class:!0});var S=w(u);oe(d.$$.fragment,S),S.forEach(c),h=G(v),b=L(v,"BUTTON",{class:!0});var O=w(b);oe(T.$$.fragment,O),O.forEach(c),v.forEach(c),E.forEach(c),this.h()},h(){y(t,"class","flex-grow"),y(u,"class","p-1"),y(b,"class","p-1"),y(o,"class","shrink-0"),y(e,"class","flex flex-row items-center justify-between gap-x-4 p-2")},m(A,E){P(A,e,E),k(e,t),k(t,n),k(t,f),k(t,a),k(e,s),k(e,o),k(o,u),re(d,u,null),k(o,h),k(o,b),re(T,b,null),m=!0,g||(N=[Y(u,"click",i[8]),Y(b,"click",i[9])],g=!0)},p(A,E){(!m||E&1)&&l!==(l=A[0].conceptNamespace+"")&&j(n,l),(!m||E&1)&&r!==(r=A[0].conceptName+"")&&j(a,r)},i(A){m||(V(d.$$.fragment,A),V(T.$$.fragment,A),m=!0)},o(A){M(d.$$.fragment,A),M(T.$$.fragment,A),m=!1},d(A){A&&c(e),fe(d),fe(T),g=!1,Le(N)}}}function tt(i){let e,t=[],l=new Map,n,f=i[2];const r=a=>a[12];for(let a=0;a<f.length;a+=1){let s=$e(i,f,a),o=r(s);l.set(o,t[a]=lt(o,s))}return{c(){e=H("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=L(a,"DIV",{class:!0});var s=w(e);for(let o=0;o<t.length;o+=1)t[o].l(s);s.forEach(c),this.h()},h(){y(e,"class","more-button flex flex-col")},m(a,s){P(a,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);n=!0},p(a,s){s&29&&(f=a[2],Q(),t=_t(t,s,r,1,a,f,l,e,Vt,lt,null,$e),x())},i(a){if(!n){for(let s=0;s<f.length;s+=1)V(t[s]);n=!0}},o(a){for(let s=0;s<t.length;s+=1)M(t[s]);n=!1},d(a){a&&c(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function lt(i,e){let t,l,n,f,r,a,s,o,u;r=new hl({props:{class:"hover:cursor-pointer",embedding:e[12]}});function d(){return e[10](e[12])}return{key:i,first:null,c(){t=H("button"),l=H("div"),n=z("Find similar"),f=q(),se(r.$$.fragment),a=q(),this.h()},l(h){t=L(h,"BUTTON",{class:!0});var b=w(t);l=L(b,"DIV",{});var T=w(l);n=I(T,"Find similar"),T.forEach(c),f=G(b),oe(r.$$.fragment,b),a=G(b),b.forEach(c),this.h()},h(){y(t,"class","flex w-full items-center justify-between"),this.first=t},m(h,b){P(h,t,b),k(t,l),k(l,n),k(t,f),re(r,t,null),k(t,a),s=!0,o||(u=Y(t,"click",d),o=!0)},p(h,b){e=h;const T={};b&4&&(T.embedding=e[12]),r.$set(T)},i(h){s||(V(r.$$.fragment,h),s=!0)},o(h){M(r.$$.fragment,h),s=!1},d(h){h&&c(t),fe(r),o=!1,u()}}}function ml(i){let e,t,l,n,f,r,a,s=i[0].conceptName!=null&&i[0].conceptNamespace!=null&&et(i),o=i[3]!=null&&tt(i);return{c(){e=H("div"),s&&s.c(),t=q(),o&&o.c(),this.h()},l(u){e=L(u,"DIV",{style:!0,class:!0});var d=w(e);s&&s.l(d),t=G(d),o&&o.l(d),d.forEach(c),this.h()},h(){y(e,"style",l=i[1]!=null?`left: ${i[1].x}px; top: ${i[1].y}px`:""),y(e,"class","absolute z-10 inline-flex -translate-x-1/2 translate-y-6 flex-col divide-y divide-gray-200 rounded border border-gray-200 bg-white shadow")},m(u,d){P(u,e,d),s&&s.m(e,null),k(e,t),o&&o.m(e,null),f=!0,r||(a=ve(fl.call(null,e,i[11])),r=!0)},p(u,[d]){u[0].conceptName!=null&&u[0].conceptNamespace!=null?s?(s.p(u,d),d&1&&V(s,1)):(s=et(u),s.c(),V(s,1),s.m(e,t)):s&&(Q(),M(s,1,1,()=>{s=null}),x()),u[3]!=null?o?(o.p(u,d),d&8&&V(o,1)):(o=tt(u),o.c(),V(o,1),o.m(e,null)):o&&(Q(),M(o,1,1,()=>{o=null}),x()),(!f||d&2&&l!==(l=u[1]!=null?`left: ${u[1].x}px; top: ${u[1].y}px`:""))&&y(e,"style",l)},i(u){f||(V(s),V(o),mt(()=>{f&&(n||(n=Re(e,Fe,{duration:60},!0)),n.run(1))}),f=!0)},o(u){M(s),M(o),n||(n=Re(e,Fe,{duration:60},!1)),n.run(0),f=!1},d(u){u&&c(e),s&&s.d(),o&&o.d(),u&&n&&n.end(),r=!1,a()}}}function _l(i,e,t){let{details:l}=e,{clickPosition:n}=e,{embeddings:f}=e,{addConceptLabel:r}=e,{findSimilar:a}=e,{addNotification:s}=e;const o=Ct();function u(m){if(!l.conceptName||!l.conceptNamespace)throw Error("Label could not be added, no active concept.");r(l.conceptNamespace,l.conceptName,l.text,m),s({kind:"success",title:`[${m===!0?"Positive":"Negative"}] Concept label added`,subtitle:jt(l.conceptNamespace,l.conceptName),message:l.text}),o("click")}const d=()=>u(!0),h=()=>u(!1),b=m=>{a&&a(m,l.text),o("click")},T=()=>o("close");return i.$$set=m=>{"details"in m&&t(0,l=m.details),"clickPosition"in m&&t(1,n=m.clickPosition),"embeddings"in m&&t(2,f=m.embeddings),"addConceptLabel"in m&&t(6,r=m.addConceptLabel),"findSimilar"in m&&t(3,a=m.findSimilar),"addNotification"in m&&t(7,s=m.addNotification)},[l,n,f,a,o,u,r,s,d,h,b,T]}class bl extends ee{constructor(e){super(),te(this,e,_l,ml,le,{details:0,clickPosition:1,embeddings:2,addConceptLabel:6,findSimilar:3,addNotification:7})}}function gl(i,e){let t,l=e;i.addEventListener("click",r=>n(r));function n(r){l.disabled||(t=new bl({props:{details:l.details(),clickPosition:{x:r.clientX,y:r.clientY},embeddings:l.embeddings,addConceptLabel:l.addConceptLabel,addNotification:l.addNotification,findSimilar:l.findSimilar},target:document.body}),t.$on("close",f),t.$on("click",f))}function f(){t==null||t.$destroy(),t=void 0}return{update(r){l=r,t==null||t.$set({details:l.details()})},destroy(){f()}}}const Pe=.5,it=.3,vl=.8,nt="#3366cc";function Ae(i){return`rgba(180,215,255,${i})`}function He(i){let e=0;if(i>Pe){const t=(i-Pe)/(1-Pe);e=it+t*(vl-it)}return Ae(e)}function at(i,e,t){const l=i.slice();return l[7]=e[t],l}function st(i,e){let t,l,n=e[7].info.name+"",f,r,a,s,o=ot(e[7])+"",u,d;return{key:i,first:null,c(){t=H("div"),l=H("div"),f=z(n),r=q(),a=H("div"),s=H("span"),u=z(o),d=q(),this.h()},l(h){t=L(h,"DIV",{class:!0});var b=w(t);l=L(b,"DIV",{class:!0});var T=w(l);f=I(T,n),T.forEach(c),r=G(b),a=L(b,"DIV",{class:!0});var m=w(a);s=L(m,"SPAN",{class:!0});var g=w(s);u=I(g,o),g.forEach(c),m.forEach(c),d=G(b),b.forEach(c),this.h()},h(){y(l,"class","named-value-name table-cell max-w-xs truncate pr-2 svelte-1689hje"),y(s,"class","px-1"),B(s,"font-bold",e[7].info.type==="keyword"||e[7].info.type==="metadata"&&!Be(e[7].info.dtype)),ne(s,"background-color",(e[7].info.type==="concept_score"||e[7].info.type==="semantic_similarity")&&typeof e[7].value=="number"?He(e[7].value):""),y(a,"class","table-cell rounded text-right"),y(t,"class","table-row"),this.first=t},m(h,b){P(h,t,b),k(t,l),k(l,f),k(t,r),k(t,a),k(a,s),k(s,u),k(t,d)},p(h,b){e=h,b&1&&n!==(n=e[7].info.name+"")&&j(f,n),b&1&&o!==(o=ot(e[7])+"")&&j(u,o),b&1&&B(s,"font-bold",e[7].info.type==="keyword"||e[7].info.type==="metadata"&&!Be(e[7].info.dtype)),b&1&&ne(s,"background-color",(e[7].info.type==="concept_score"||e[7].info.type==="semantic_similarity")&&typeof e[7].value=="number"?He(e[7].value):"")},d(h){h&&c(t)}}}function pl(i){let e,t,l=[],n=new Map,f,r=`${i[4]}px`,a=`${Math.min(i[1],i[3]-i[2]-20)}px`,s=i[0];const o=u=>u[7];for(let u=0;u<s.length;u+=1){let d=at(i,s,u),h=o(d);n.set(h,l[u]=st(h,d))}return{c(){e=H("div"),t=H("div");for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){e=L(u,"DIV",{role:!0,class:!0});var d=w(e);t=L(d,"DIV",{class:!0});var h=w(t);for(let b=0;b<l.length;b+=1)l[b].l(h);h.forEach(c),d.forEach(c),this.h()},h(){y(t,"class","table border-spacing-y-2"),y(e,"role","tooltip"),y(e,"class","absolute max-w-fit -translate-y-full break-words border border-gray-300 bg-white px-2 shadow-md"),mt(()=>i[6].call(e)),B(e,"hidden",i[0].length===0),ne(e,"top",r),ne(e,"left",a)},m(u,d){P(u,e,d),k(e,t);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(t,null);f=Pt(e,i[6].bind(e))},p(u,[d]){d&1&&(s=u[0],l=_t(l,d,o,1,u,s,n,t,Bt,st,null,at)),d&1&&B(e,"hidden",u[0].length===0),d&6&&a!==(a=`${Math.min(u[1],u[3]-u[2]-20)}px`)&&ne(e,"left",a)},i:X,o:X,d(u){u&&c(e);for(let d=0;d<l.length;d+=1)l[d].d();f()}}}function ot(i){return typeof i.value=="number"?i.value.toFixed(3):i.info.dtype==="string_span"?"true":i.value}function kl(i,e,t){let{namedValues:l}=e,{x:n}=e,{y:f}=e;const r=window.innerWidth;let a=0;const s=f-1;function o(){a=this.clientWidth,t(2,a)}return i.$$set=u=>{"namedValues"in u&&t(0,l=u.namedValues),"x"in u&&t(1,n=u.x),"y"in u&&t(5,f=u.y)},[l,n,a,r,s,f,o]}class wl extends ee{constructor(e){super(),te(this,e,kl,pl,le,{namedValues:0,x:1,y:5})}}function Sl(i,e){let t,l=e;const n=()=>r();l.isHovered&&f();function f(){const a=l.namedValues.filter(h=>Array.from(l.spansHovered).some(b=>{const T=gt(b);return vt(h.specificPath.slice(0,T.length),T)}));l.itemScrollContainer!=null&&l.itemScrollContainer.addEventListener("scroll",n);const s=i.getBoundingClientRect(),o=window.getComputedStyle(i),u=parseInt(o.getPropertyValue("line-height")),d=s.height>u?s.x+i.offsetLeft||i.clientLeft:s.x;t=new wl({props:{namedValues:a,x:d,y:s.top},target:document.body})}function r(){var a;t==null||t.$destroy(),(a=l.itemScrollContainer)==null||a.removeEventListener("scroll",n)}return{update(a){r(),l=a,l.isHovered&&f()},destroy(){r()}}}const El=500,pe=100;function Tl(i,e,t){const l=[],n=new Set;for(const f of i){let r=!1;const a=[];for(const N of f.paths)n.has(N)||(a.push(N),n.add(N));const s=[],o=[];let u=-1/0;for(const[N,A]of Object.entries(f.originalSpans)){const E=e[N],C=gt(N);if(!(E==null||E.length===0))for(const v of A)for(const S of E){const O=S.path.slice(C.length),Z=zt(v,O);if(Z==null)continue;const ae=ge.value(Z);if(ae==null)continue;if(S.dtype==="float32"){const ce=ge.value(Z);ce!=null&&(u=Math.max(u,ce))}const he=ke(ge.path(v)),ie=!a.includes(he),ue={value:ae,info:S,specificPath:ge.path(Z)};ie||s.push(ue),o.push(ue),S.type==="concept_score"||S.type==="semantic_similarity"?ae>.5&&(r=!0):r=!0}}const d=o.some(N=>N.info.type==="label"),h=o.some(N=>N.info.type==="leaf_span"),b=o.some(N=>N.info.type==="keyword"),T=o.some(N=>N.info.type==="metadata"&&!Be(N.info.dtype)),m=f.paths.some(N=>t.has(N)),g=m&&a.length>0&&Array.from(t).some(N=>a.includes(N));l.push({backgroundColor:He(u),isBlackBolded:b||T||h,isHighlightBolded:d,isShownSnippet:r,snippetScore:u,namedValues:s,paths:f.paths,text:f.text,snippetText:f.text,originalSpans:f.originalSpans,isHovered:m,isFirstHover:g})}return l}function Nl(i,e){var r,a,s;if(i=i.map(o=>{if(o.text.length>pe){const u={...o,text:o.text.slice(0,pe),snippetText:o.snippetText.slice(0,pe)},d=o.text.slice(pe).split(`
`),h=d.map((b,T)=>{const m=T!==d.length-1,g=b+(m?`
`:"");return{...o,text:g,snippetText:g,isShownSnippet:!1,namedValues:[]}});return[u,...h]}else return[o]}).flat(),e)return{snippetSpans:i.map(o=>({renderSpan:o,isShown:!0})),someSnippetsHidden:!1};const t=[];let l=0;for(const o of i)o.isShownSnippet&&(l+=o.text.length);const n=i.filter(o=>!o.isShownSnippet).sort((o,u)=>u.snippetScore-o.snippetScore);for(const o of n)if(o.isShownSnippet=!0,l+=o.text.length,l>El)break;let f=!1;for(const[o,u]of i.entries())if(u.isShownSnippet)t.push({renderSpan:u,isShown:!0});else{const d=((r=i[o+1])==null?void 0:r.isShownSnippet)===!0,h=((a=i[o-1])==null?void 0:a.isShownSnippet)===!0,b=((s=t[t.length-1])==null?void 0:s.isShown)===!0;t.push({renderSpan:u,isShown:!1,isEllipsis:(d||h)&&b,hasNewline:u.text.includes(`
`)}),f=!0}return{snippetSpans:t,someSnippetsHidden:f}}function rt(i,e,t){const l=i.slice();l[33]=e[t];const n=l[33].renderSpan;return l[34]=n,l}function yl(i){let e,t,l,n,f,r=i[33].hasNewline&&ft();return{c(){e=H("span"),t=z("..."),r&&r.c(),l=we(),this.h()},l(a){e=L(a,"SPAN",{class:!0});var s=w(e);t=I(s,"..."),s.forEach(c),r&&r.l(a),l=we(),this.h()},h(){y(e,"class","highlight-span text-sm leading-5 svelte-8ox5pu")},m(a,s){P(a,e,s),k(e,t),r&&r.m(a,s),P(a,l,s),n||(f=ve(bt.call(null,e,{text:`Some text was hidden to improve readability. 
Click "Show all" to show the entire document.`})),n=!0)},p(a,s){a[33].hasNewline?r||(r=ft(),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},i:X,o:X,d(a){a&&c(e),r&&r.d(a),a&&c(l),n=!1,f()}}}function Cl(i){let e,t,l,n,f,r,a,s;const o=[Pl,Vl],u=[];function d(m,g){return m[1]?0:1}t=d(i),l=u[t]=o[t](i);function h(){return i[27](i[34])}function b(){return i[28](i[34])}function T(){return i[29](i[34])}return{c(){e=H("span"),l.c(),this.h()},l(m){e=L(m,"SPAN",{class:!0});var g=w(e);l.l(g),g.forEach(c),this.h()},h(){y(e,"class","hover:cursor-poiner highlight-span break-words text-sm leading-5 svelte-8ox5pu"),B(e,"hover:cursor-pointer",i[0].length>0),B(e,"font-bold",i[34].isBlackBolded),B(e,"font-medium",i[34].isHighlightBolded&&!i[34].isBlackBolded),ne(e,"color",i[34].isHighlightBolded&&!i[34].isBlackBolded?nt:""),ne(e,"background-color",i[34].isHovered?Ae(ct):i[34].backgroundColor)},m(m,g){P(m,e,g),u[t].m(e,null),r=!0,a||(s=[ve(n=Sl.call(null,e,{namedValues:i[34].namedValues,isHovered:i[34].isFirstHover,spansHovered:i[4],itemScrollContainer:i[8]})),ve(f=gl.call(null,e,{details:h,findSimilar:i[3]!=null?i[15]:null,embeddings:i[2],addConceptLabel:i[13],addNotification:i[16]!=null?i[16].addNotification:ht,disabled:i[34].paths.length===0||i[2].length===0})),Y(e,"mouseenter",b),Y(e,"mouseleave",T)],a=!0)},p(m,g){i=m;let N=t;t=d(i),t===N?u[t].p(i,g):(Q(),M(u[N],1,1,()=>{u[N]=null}),x(),l=u[t],l?l.p(i,g):(l=u[t]=o[t](i),l.c()),V(l,1),l.m(e,null)),n&&Oe(n.update)&&g[0]&400&&n.update.call(null,{namedValues:i[34].namedValues,isHovered:i[34].isFirstHover,spansHovered:i[4],itemScrollContainer:i[8]}),f&&Oe(f.update)&&g[0]&140&&f.update.call(null,{details:h,findSimilar:i[3]!=null?i[15]:null,embeddings:i[2],addConceptLabel:i[13],addNotification:i[16]!=null?i[16].addNotification:ht,disabled:i[34].paths.length===0||i[2].length===0}),(!r||g[0]&1)&&B(e,"hover:cursor-pointer",i[0].length>0),(!r||g[0]&128)&&B(e,"font-bold",i[34].isBlackBolded),(!r||g[0]&128)&&B(e,"font-medium",i[34].isHighlightBolded&&!i[34].isBlackBolded),g[0]&128&&ne(e,"color",i[34].isHighlightBolded&&!i[34].isBlackBolded?nt:""),g[0]&128&&ne(e,"background-color",i[34].isHovered?Ae(ct):i[34].backgroundColor)},i(m){r||(V(l),r=!0)},o(m){M(l),r=!1},d(m){m&&c(e),u[t].d(),a=!1,Le(s)}}}function ft(i){let e,t;return{c(){e=H("span"),t=H("br")},l(l){e=L(l,"SPAN",{});var n=w(e);t=L(n,"BR",{}),n.forEach(c)},m(l,n){P(l,e,n),k(e,t)},d(l){l&&c(e)}}}function Vl(i){let e=i[34].snippetText+"",t;return{c(){t=z(e)},l(l){t=I(l,e)},m(l,n){P(l,t,n)},p(l,n){n[0]&128&&e!==(e=l[34].snippetText+"")&&j(t,e)},i:X,o:X,d(l){l&&c(t)}}}function Pl(i){let e,t;return e=new Ot({props:{source:i[34].snippetText}}),{c(){se(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,n){const f={};n[0]&128&&(f.source=l[34].snippetText),e.$set(f)},i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){fe(e,l)}}}function ut(i){let e,t,l,n;const f=[Cl,yl],r=[];function a(s,o){return s[33].isShown?0:s[33].isEllipsis?1:-1}return~(e=a(i))&&(t=r[e]=f[e](i)),{c(){t&&t.c(),l=we()},l(s){t&&t.l(s),l=we()},m(s,o){~e&&r[e].m(s,o),P(s,l,o),n=!0},p(s,o){let u=e;e=a(s),e===u?~e&&r[e].p(s,o):(t&&(Q(),M(r[u],1,1,()=>{r[u]=null}),x()),~e?(t=r[e],t?t.p(s,o):(t=r[e]=f[e](s),t.c()),V(t,1),t.m(l.parentNode,l)):t=null)},i(s){n||(V(t),n=!0)},o(s){M(t),n=!1},d(s){~e&&r[e].d(s),s&&c(l)}}}function dt(i){let e,t,l,n,f;const r=[Al,Bl],a=[];function s(o,u){return o[5]?1:0}return l=s(i),n=a[l]=r[l](i),{c(){e=H("div"),t=H("div"),n.c(),this.h()},l(o){e=L(o,"DIV",{class:!0});var u=w(e);t=L(u,"DIV",{class:!0});var d=w(t);n.l(d),d.forEach(c),u.forEach(c),this.h()},h(){y(t,"class","w-30 mt-2 rounded border border-neutral-300 text-center"),y(e,"class","flex flex-row justify-center")},m(o,u){P(o,e,u),k(e,t),a[l].m(t,null),f=!0},p(o,u){let d=l;l=s(o),l===d?a[l].p(o,u):(Q(),M(a[d],1,1,()=>{a[d]=null}),x(),n=a[l],n?n.p(o,u):(n=a[l]=r[l](o),n.c()),V(n,1),n.m(t,null))},i(o){f||(V(n),f=!0)},o(o){M(n),f=!1},d(o){o&&c(e),a[l].d()}}}function Bl(i){let e,t;return e=new pt({props:{size:"small",class:"w-full",kind:"ghost",icon:el,$$slots:{default:[Hl]},$$scope:{ctx:i}}}),e.$on("click",i[31]),{c(){se(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,n){const f={};n[1]&64&&(f.$$scope={dirty:n,ctx:l}),e.$set(f)},i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){fe(e,l)}}}function Al(i){let e,t;return e=new pt({props:{size:"small",class:"w-full",kind:"ghost",icon:Qt,$$slots:{default:[Ll]},$$scope:{ctx:i}}}),e.$on("click",i[30]),{c(){se(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,n){const f={};n[1]&64&&(f.$$scope={dirty:n,ctx:l}),e.$set(f)},i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){fe(e,l)}}}function Hl(i){let e;return{c(){e=z("Hide excess")},l(t){e=I(t,"Hide excess")},m(t,l){P(t,e,l)},d(t){t&&c(e)}}}function Ll(i){let e;return{c(){e=z("Show all")},l(t){e=I(t,"Show all")},m(t,l){P(t,e,l)},d(t){t&&c(e)}}}function Ml(i){let e,t,l,n=i[7],f=[];for(let s=0;s<n.length;s+=1)f[s]=ut(rt(i,n,s));const r=s=>M(f[s],1,1,()=>{f[s]=null});let a=(i[6]||i[5])&&dt(i);return{c(){e=H("div");for(let s=0;s<f.length;s+=1)f[s].c();t=q(),a&&a.c(),this.h()},l(s){e=L(s,"DIV",{class:!0});var o=w(e);for(let u=0;u<f.length;u+=1)f[u].l(o);t=G(o),a&&a.l(o),o.forEach(c),this.h()},h(){y(e,"class","relative overflow-x-hidden text-ellipsis whitespace-break-spaces py-4")},m(s,o){P(s,e,o);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(e,null);k(e,t),a&&a.m(e,null),l=!0},p(s,o){if(o[0]&110495){n=s[7];let u;for(u=0;u<n.length;u+=1){const d=rt(s,n,u);f[u]?(f[u].p(d,o),V(f[u],1)):(f[u]=ut(d),f[u].c(),V(f[u],1),f[u].m(e,t))}for(Q(),u=n.length;u<f.length;u+=1)r(u);x()}s[6]||s[5]?a?(a.p(s,o),o[0]&96&&V(a,1)):(a=dt(s),a.c(),V(a,1),a.m(e,null)):a&&(Q(),M(a,1,1,()=>{a=null}),x())},i(s){if(!l){for(let o=0;o<n.length;o+=1)V(f[o]);V(a),l=!0}},o(s){f=f.filter(Boolean);for(let o=0;o<f.length;o+=1)M(f[o]);M(a),l=!1},d(s){s&&c(e),At(f,s),a&&a.d()}}}const ct=.9,ht=()=>null;function zl(i,e,t){let l,n,f,r,a,s,{text:o}=e,{row:u}=e,{spanPaths:d}=e,{path:h=void 0}=e,{valuePaths:b}=e,{markdown:T=!1}=e,{embeddings:m}=e,{datasetViewStore:g=void 0}=e,{datasetStore:N=void 0}=e,A,E={},C=new Set;const v=p=>{p.paths.forEach(R=>C.add(R)),t(4,C)},S=p=>{p.paths.forEach(R=>C.delete(R)),t(4,C)};let O={};const Z=p=>{const me={conceptName:null,conceptNamespace:null,text:n.filter(_e=>_e.paths.some(Ve=>((p==null?void 0:p.paths)||[]).some(be=>vt(be,Ve)))).map(_e=>_e.text).join("")};for(const _e of Object.keys(p.originalSpans)){const Ve=(E[_e]||[]).filter(be=>be.type==="concept_score");for(const be of Ve){const Me=be.signal;me.conceptName=Me.concept_name,me.conceptNamespace=Me.namespace;break}}return me},ae=It();De(i,ae,p=>t(32,a=p));const he=(p,R,_,me)=>{if(!R||!p)throw Error("Label could not be added, no active concept.");a.mutate([p,R,{insert:[{text:_,label:me}]}])};let ie=!1,ue=Ht(Yt);De(i,ue,p=>t(8,s=p));const ce=(p,R)=>{g==null||h==null||g.addSearch({path:[ke(h)],type:"semantic",query:R,embedding:p})},Se=Ft(),Ee=p=>Z(p),Te=p=>v(p),Ne=p=>S(p),ye=()=>t(5,ie=!0),Ce=()=>t(5,ie=!1);return i.$$set=p=>{"text"in p&&t(17,o=p.text),"row"in p&&t(18,u=p.row),"spanPaths"in p&&t(0,d=p.spanPaths),"path"in p&&t(19,h=p.path),"valuePaths"in p&&t(20,b=p.valuePaths),"markdown"in p&&t(1,T=p.markdown),"embeddings"in p&&t(2,m=p.embeddings),"datasetViewStore"in p&&t(21,g=p.datasetViewStore),"datasetStore"in p&&t(3,N=p.datasetStore)},i.$$.update=()=>{if(i.$$.dirty[0]&786433&&(t(22,A={}),d.forEach(p=>{const R=Rt(u,p);t(22,A[ke(p)]=R.filter(_=>Dt(ge.path(_),h)||h==null),A)})),i.$$.dirty[0]&9437184){t(23,E={});for(const p of b){const R=ke(p.spanPath);E[R]==null&&t(23,E[R]=[],E),E[R].push(p)}}if(i.$$.dirty[0]&4325376&&t(26,l=Ut(o,A)),i.$$.dirty[0]&75497488&&t(25,n=Tl(l,E,C)),i.$$.dirty[0]&83886080){t(24,O={});for(const p of l)for(const R of p.paths)t(24,O[R]=O[R]||[],O),O[R].push(p)}i.$$.dirty[0]&33554464&&t(7,{snippetSpans:f,someSnippetsHidden:r}=Nl(n,ie),f,(t(6,r),t(25,n),t(5,ie),t(26,l),t(23,E),t(4,C),t(17,o),t(22,A),t(20,b),t(0,d),t(18,u),t(19,h)))},[d,T,m,N,C,ie,r,f,s,v,S,Z,ae,he,ue,ce,Se,o,u,h,b,g,A,E,O,n,l,Ee,Te,Ne,ye,Ce]}class Ul extends ee{constructor(e){super(),te(this,e,zl,Ml,le,{text:17,row:18,spanPaths:0,path:19,valuePaths:20,markdown:1,embeddings:2,datasetViewStore:21,datasetStore:3},null,[-1,-1])}}export{hl as E,Ul as S,Yl as T,Fl as V,sl as a,il as b,He as c};
