import{S as Z,i as H,s as J,E as R,Z as X,_ as j,m as z,h as g,n as k,$ as se,b as B,a0 as w,L as ge,a1 as ne,N as C,Q as K,q as O,r as Q,u as W,k as S,y as U,l as P,z as x,A as $,a7 as _e,V as he,g as V,d as y,B as ee,e as re,v as te,f as le,O as ve,W as be,X as pe,a as Y,c as G,p as oe,G as fe}from"./index.8706e7a3.js";import{d as we,h as ke,a2 as ze,aY as Ae,X as Ee,V as D,aD as Se,aE as Pe,a9 as Ve,I as Me,K as ye}from"./Commands.279aa5bc.js";import{v as Ne,r as Fe}from"./notificationsStore.0b548372.js";import{V as Re,E as Be}from"./StringSpanHighlight.df45db34.js";function ue(o){let e,l;return{c(){e=X("title"),l=O(o[1])},l(t){e=j(t,"title",{});var a=z(e);l=Q(a,o[1]),a.forEach(g)},m(t,a){B(t,e,a),w(e,l)},p(t,a){a&2&&W(l,t[1])},d(t){t&&g(e)}}}function Te(o){let e,l,t=o[1]&&ue(o),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:o[0]},{height:o[0]},o[2],o[3]],r={};for(let n=0;n<a.length;n+=1)r=R(r,a[n]);return{c(){e=X("svg"),t&&t.c(),l=X("path"),this.h()},l(n){e=j(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var f=z(e);t&&t.l(f),l=j(f,"path",{d:!0}),z(l).forEach(g),f.forEach(g),this.h()},h(){k(l,"d","M16 7a3 3 0 113-3A3.0033 3.0033 0 0116 7zm0-4a1 1 0 101 1A1.001 1.001 0 0016 3zM11 30a3 3 0 113-3A3.0033 3.0033 0 0111 30zm0-4a1 1 0 101 1A1.001 1.001 0 0011 26zM7 11a3 3 0 113-3A3.0033 3.0033 0 017 11zM7 7A1 1 0 108 8 1.001 1.001 0 007 7zM21 30a3 3 0 113-3A3.0033 3.0033 0 0121 30zm0-4a1 1 0 101 1A1.001 1.001 0 0021 26zM25 11a3 3 0 113-3A3.0033 3.0033 0 0125 11zm0-4a1 1 0 101 1A1.001 1.001 0 0025 7zM4 21a3 3 0 113-3A3.0033 3.0033 0 014 21zm0-4a1 1 0 101 1A1.001 1.001 0 004 17zM28 21a3 3 0 113-3A3.0033 3.0033 0 0128 21zm0-4a1 1 0 101 1A1.001 1.001 0 0028 17zM16 22a6 6 0 116-6A6.0069 6.0069 0 0116 22zm0-10a4 4 0 104 4A4.0045 4.0045 0 0016 12z"),se(e,r)},m(n,f){B(n,e,f),t&&t.m(e,null),w(e,l)},p(n,[f]){n[1]?t?t.p(n,f):(t=ue(n),t.c(),t.m(e,l)):t&&(t.d(1),t=null),se(e,r=ge(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},f&1&&{width:n[0]},f&1&&{height:n[0]},f&4&&n[2],f&8&&n[3]]))},i:ne,o:ne,d(n){n&&g(e),t&&t.d()}}}function De(o,e,l){let t,a;const r=["size","title"];let n=C(e,r),{size:f=16}=e,{title:i=void 0}=e;return o.$$set=s=>{l(5,e=R(R({},e),K(s))),l(3,n=C(e,r)),"size"in s&&l(0,f=s.size),"title"in s&&l(1,i=s.title)},o.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||i),l(2,a={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=K(e),[f,i,a,n,t]}class Ie extends Z{constructor(e){super(),H(this,e,De,Te,J,{size:0,title:1})}}function Le(o){let e,l,t,a,r;const n=[o[3],{type:o[0]?"green":"blue"},{icon:o[2]}];let f={};for(let i=0;i<n.length;i+=1)f=R(f,n[i]);return l=new we({props:f}),{c(){e=S("div"),U(l.$$.fragment),this.h()},l(i){e=P(i,"DIV",{class:!0});var s=z(e);x(l.$$.fragment,s),s.forEach(g),this.h()},h(){k(e,"class","signal-badge")},m(i,s){B(i,e,s),$(l,e,null),t=!0,a||(r=_e(ke.call(null,e,{text:o[1]})),a=!0)},p(i,[s]){const d=s&13?ge(n,[s&8&&he(i[3]),s&1&&{type:i[0]?"green":"blue"},s&4&&{icon:i[2]}]):{};l.$set(d)},i(i){t||(V(l.$$.fragment,i),t=!0)},o(i){y(l.$$.fragment,i),t=!1},d(i){i&&g(e),ee(l),a=!1,r()}}}function qe(o,e,l){const t=["isPreview"];let a=C(e,t),{isPreview:r=!1}=e;const n=r?"Signal is in preview mode and has not been computed for the whole dataset.":"Generated by a signal.",f=r?Re:Ie;return o.$$set=i=>{e=R(R({},e),K(i)),l(3,a=C(e,t)),"isPreview"in i&&l(0,r=i.isPreview)},[r,n,f,a]}class Ce extends Z{constructor(e){super(),H(this,e,qe,Le,J,{isPreview:0})}}function de(o,e,l){const t=o.slice();return t[0]=e[l],t}function ce(o){let e,l,t=[],a=new Map,r,n=o[1];const f=i=>ye(i[0].path);for(let i=0;i<n.length;i+=1){let s=de(o,n,i),d=f(s);a.set(d,t[i]=me(d,s))}return{c(){e=S("div"),l=S("table");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=P(i,"DIV",{class:!0});var s=z(e);l=P(s,"TABLE",{class:!0});var d=z(l);for(let u=0;u<t.length;u+=1)t[u].l(d);d.forEach(g),s.forEach(g),this.h()},h(){k(l,"class","table w-full table-fixed border-collapse px-2 pt-1"),k(e,"class","border-t border-neutral-200 px-2 py-4")},m(i,s){B(i,e,s),w(e,l);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(l,null);r=!0},p(i,s){s&2&&(n=i[1],te(),t=be(t,s,f,1,i,n,a,l,pe,me,null,de),le())},i(i){if(!r){for(let s=0;s<n.length;s+=1)V(t[s]);r=!0}},o(i){for(let s=0;s<t.length;s+=1)y(t[s]);r=!1},d(i){i&&g(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function Ye(o){let e,l;return e=new Ce({props:{isPreview:o[0].isPreviewSignal}}),{c(){U(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,a){$(e,t,a),l=!0},p(t,a){const r={};a&2&&(r.isPreview=t[0].isPreviewSignal),e.$set(r)},i(t){l||(V(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){ee(e,t)}}}function Ge(o){var t;let e,l;return e=new Be({props:{hideEmbeddingName:!0,embedding:(t=o[0].field.signal)==null?void 0:t.signal_name}}),{c(){U(e.$$.fragment)},l(a){x(e.$$.fragment,a)},m(a,r){$(e,a,r),l=!0},p(a,r){var f;const n={};r&2&&(n.embedding=(f=a[0].field.signal)==null?void 0:f.signal_name),e.$set(n)},i(a){l||(V(e.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),l=!1},d(a){ee(e,a)}}}function me(o,e){let l,t,a,r=e[0].fieldName+"",n,f,i,s,d,u,I,_,c,h=e[0].formattedValue+"",A,N,F,b;const T=[Ge,Ye],p=[];function E(v,m){return v[0].isEmbeddingSignal?0:v[0].isSignal?1:-1}return~(d=E(e))&&(u=p[d]=T[d](e)),{key:o,first:null,c(){l=S("tr"),t=S("td"),a=S("span"),n=O(r),i=Y(),s=S("td"),u&&u.c(),I=Y(),_=S("td"),c=S("div"),A=O(h),F=Y(),this.h()},l(v){l=P(v,"TR",{class:!0});var m=z(l);t=P(m,"TD",{class:!0});var M=z(t);a=P(M,"SPAN",{title:!0});var L=z(a);n=Q(L,r),L.forEach(g),M.forEach(g),i=G(m),s=P(m,"TD",{class:!0});var q=z(s);u&&u.l(q),q.forEach(g),I=G(m),_=P(m,"TD",{class:!0});var ae=z(_);c=P(ae,"DIV",{title:!0,class:!0});var ie=z(c);A=Q(ie,h),ie.forEach(g),ae.forEach(g),F=G(m),m.forEach(g),this.h()},h(){k(a,"title",f=e[0].fieldName),oe(a,"padding-left",`${e[0].indentLevel*12}px`),k(t,"class","truncate p-2 font-mono text-xs font-medium text-neutral-500"),k(s,"class","w-10"),k(c,"title",N=`${e[0].value}`),k(c,"class","truncate pr-2 text-xs"),fe(c,"italic",e[0].formattedValue===null),k(_,"class","p-2"),k(l,"class","border-gray-300"),this.first=l},m(v,m){B(v,l,m),w(l,t),w(t,a),w(a,n),w(l,i),w(l,s),~d&&p[d].m(s,null),w(l,I),w(l,_),w(_,c),w(c,A),w(l,F),b=!0},p(v,m){e=v,(!b||m&2)&&r!==(r=e[0].fieldName+"")&&W(n,r),(!b||m&2&&f!==(f=e[0].fieldName))&&k(a,"title",f),m&2&&oe(a,"padding-left",`${e[0].indentLevel*12}px`);let M=d;d=E(e),d===M?~d&&p[d].p(e,m):(u&&(te(),y(p[M],1,1,()=>{p[M]=null}),le()),~d?(u=p[d],u?u.p(e,m):(u=p[d]=T[d](e),u.c()),V(u,1),u.m(s,null)):u=null),(!b||m&2)&&h!==(h=e[0].formattedValue+"")&&W(A,h),(!b||m&2&&N!==(N=`${e[0].value}`))&&k(c,"title",N),(!b||m&2)&&fe(c,"italic",e[0].formattedValue===null)},i(v){b||(V(u),b=!0)},o(v){y(u),b=!1},d(v){v&&g(l),~d&&p[d].d()}}}function Xe(o){let e,l,t=o[1].length>0&&ce(o);return{c(){t&&t.c(),e=re()},l(a){t&&t.l(a),e=re()},m(a,r){t&&t.m(a,r),B(a,e,r),l=!0},p(a,[r]){a[1].length>0?t?(t.p(a,r),r&2&&V(t,1)):(t=ce(a),t.c(),V(t,1),t.m(e.parentNode,e)):t&&(te(),y(t,1,1,()=>{t=null}),le())},i(a){l||(V(t),l=!0)},o(a){y(t),l=!1},d(a){t&&t.d(a),a&&g(e)}}}function je(o,e,l){let t,a,{row:r}=e,{visibleFields:n}=e,{mediaFields:f}=e,{selectRowsSchema:i=void 0}=e;const s=ze();ve(o,s,u=>l(6,a=u));function d(u){return Ae(u).filter(_=>Ne(_,n)).filter(_=>!f.some(c=>{var h;return Ee(c.path,(h=D.field(_))==null?void 0:h.path)})).map(_=>{var T;const c=D.field(_),h=D.path(_);let A=D.value(_);if(c.dtype==="string_span"){if(i==null)return null;const p=[];for(let E=h.length-1;E>=0;E--){const v=h.slice(0,E);if(Se(i==null?void 0:i.schema,v).dtype==="string"){const M=D.value(Pe(u,v)),{start:L,end:q}=A;p.push(M.slice(L,q));break}}A=p}const N=((T=a.data)==null?void 0:T.some(p=>{var E;return p.name===((E=c.signal)==null?void 0:E.signal_name)}))||!1,F=Ve(c);let b;return N||F&&c.dtype==null||c.dtype==="embedding"||c.repeated_field!=null?b="":A==null?b=null:b=Me(A),{indentLevel:h.length-1,fieldName:h[h.length-1],field:c,path:h,isSignal:F,isPreviewSignal:i!=null?Fe(i,h):!1,isEmbeddingSignal:N,value:A,formattedValue:b}}).filter(_=>_!=null)}return o.$$set=u=>{"row"in u&&l(0,r=u.row),"visibleFields"in u&&l(3,n=u.visibleFields),"mediaFields"in u&&l(4,f=u.mediaFields),"selectRowsSchema"in u&&l(5,i=u.selectRowsSchema)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=d(r))},[r,t,s,n,f,i]}class Ze extends Z{constructor(e){super(),H(this,e,je,Xe,J,{row:0,visibleFields:3,mediaFields:4,selectRowsSchema:5})}}export{Ze as R,Ce as S};
