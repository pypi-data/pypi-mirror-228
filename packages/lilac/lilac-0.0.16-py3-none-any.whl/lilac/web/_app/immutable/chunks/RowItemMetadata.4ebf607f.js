import{S as X,i as Z,s as H,E as T,Z as G,_ as j,m as k,h as g,n as p,$ as se,b as D,a0 as b,L as ge,a1 as ne,N as C,Q as K,q as O,r as Q,u as W,k as E,y as J,l as S,z as U,A as x,a7 as _e,V as he,g as P,d as y,B as $,e as re,v as ee,f as te,O as ve,W as be,X as pe,a as q,c as Y,p as oe,G as fe}from"./index.8706e7a3.js";import{d as we,h as ke,a2 as ze,aY as Ae,V as L,aD as Ee,aE as Se,a9 as Pe,I as Ve,K as Me}from"./Commands.b285d8c6.js";import{v as ye,r as Ne}from"./notificationsStore.d636816c.js";import{V as Re,E as Be}from"./StringSpanHighlight.fab98b3f.js";function ue(o){let e,l;return{c(){e=G("title"),l=O(o[1])},l(t){e=j(t,"title",{});var a=k(e);l=Q(a,o[1]),a.forEach(g)},m(t,a){D(t,e,a),b(e,l)},p(t,a){a&2&&W(l,t[1])},d(t){t&&g(e)}}}function Te(o){let e,l,t=o[1]&&ue(o),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:o[0]},{height:o[0]},o[2],o[3]],r={};for(let n=0;n<a.length;n+=1)r=T(r,a[n]);return{c(){e=G("svg"),t&&t.c(),l=G("path"),this.h()},l(n){e=j(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var u=k(e);t&&t.l(u),l=j(u,"path",{d:!0}),k(l).forEach(g),u.forEach(g),this.h()},h(){p(l,"d","M16 7a3 3 0 113-3A3.0033 3.0033 0 0116 7zm0-4a1 1 0 101 1A1.001 1.001 0 0016 3zM11 30a3 3 0 113-3A3.0033 3.0033 0 0111 30zm0-4a1 1 0 101 1A1.001 1.001 0 0011 26zM7 11a3 3 0 113-3A3.0033 3.0033 0 017 11zM7 7A1 1 0 108 8 1.001 1.001 0 007 7zM21 30a3 3 0 113-3A3.0033 3.0033 0 0121 30zm0-4a1 1 0 101 1A1.001 1.001 0 0021 26zM25 11a3 3 0 113-3A3.0033 3.0033 0 0125 11zm0-4a1 1 0 101 1A1.001 1.001 0 0025 7zM4 21a3 3 0 113-3A3.0033 3.0033 0 014 21zm0-4a1 1 0 101 1A1.001 1.001 0 004 17zM28 21a3 3 0 113-3A3.0033 3.0033 0 0128 21zm0-4a1 1 0 101 1A1.001 1.001 0 0028 17zM16 22a6 6 0 116-6A6.0069 6.0069 0 0116 22zm0-10a4 4 0 104 4A4.0045 4.0045 0 0016 12z"),se(e,r)},m(n,u){D(n,e,u),t&&t.m(e,null),b(e,l)},p(n,[u]){n[1]?t?t.p(n,u):(t=ue(n),t.c(),t.m(e,l)):t&&(t.d(1),t=null),se(e,r=ge(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:n[0]},u&1&&{height:n[0]},u&4&&n[2],u&8&&n[3]]))},i:ne,o:ne,d(n){n&&g(e),t&&t.d()}}}function De(o,e,l){let t,a;const r=["size","title"];let n=C(e,r),{size:u=16}=e,{title:i=void 0}=e;return o.$$set=s=>{l(5,e=T(T({},e),K(s))),l(3,n=C(e,r)),"size"in s&&l(0,u=s.size),"title"in s&&l(1,i=s.title)},o.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||i),l(2,a={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=K(e),[u,i,a,n,t]}class Fe extends X{constructor(e){super(),Z(this,e,De,Te,H,{size:0,title:1})}}function Ie(o){let e,l,t,a,r;const n=[o[3],{type:o[0]?"green":"blue"},{icon:o[2]}];let u={};for(let i=0;i<n.length;i+=1)u=T(u,n[i]);return l=new we({props:u}),{c(){e=E("div"),J(l.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var s=k(e);U(l.$$.fragment,s),s.forEach(g),this.h()},h(){p(e,"class","signal-badge")},m(i,s){D(i,e,s),x(l,e,null),t=!0,a||(r=_e(ke.call(null,e,{text:o[1]})),a=!0)},p(i,[s]){const f=s&13?ge(n,[s&8&&he(i[3]),s&1&&{type:i[0]?"green":"blue"},s&4&&{icon:i[2]}]):{};l.$set(f)},i(i){t||(P(l.$$.fragment,i),t=!0)},o(i){y(l.$$.fragment,i),t=!1},d(i){i&&g(e),$(l),a=!1,r()}}}function Le(o,e,l){const t=["isPreview"];let a=C(e,t),{isPreview:r=!1}=e;const n=r?"Signal is in preview mode and has not been computed for the whole dataset.":"Generated by a signal.",u=r?Re:Fe;return o.$$set=i=>{e=T(T({},e),K(i)),l(3,a=C(e,t)),"isPreview"in i&&l(0,r=i.isPreview)},[r,n,u,a]}class Ce extends X{constructor(e){super(),Z(this,e,Le,Ie,H,{isPreview:0})}}function de(o,e,l){const t=o.slice();return t[0]=e[l],t}function ce(o){let e,l,t=[],a=new Map,r,n=o[1];const u=i=>Me(i[0].path);for(let i=0;i<n.length;i+=1){let s=de(o,n,i),f=u(s);a.set(f,t[i]=me(f,s))}return{c(){e=E("div"),l=E("table");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=S(i,"DIV",{class:!0});var s=k(e);l=S(s,"TABLE",{class:!0});var f=k(l);for(let d=0;d<t.length;d+=1)t[d].l(f);f.forEach(g),s.forEach(g),this.h()},h(){p(l,"class","table w-full table-fixed border-collapse px-2 pt-1"),p(e,"class","border-t border-neutral-200 px-2 py-4")},m(i,s){D(i,e,s),b(e,l);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(l,null);r=!0},p(i,s){s&2&&(n=i[1],ee(),t=be(t,s,u,1,i,n,a,l,pe,me,null,de),te())},i(i){if(!r){for(let s=0;s<n.length;s+=1)P(t[s]);r=!0}},o(i){for(let s=0;s<t.length;s+=1)y(t[s]);r=!1},d(i){i&&g(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function qe(o){let e,l;return e=new Ce({props:{isPreview:o[0].isPreviewSignal}}),{c(){J(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,a){x(e,t,a),l=!0},p(t,a){const r={};a&2&&(r.isPreview=t[0].isPreviewSignal),e.$set(r)},i(t){l||(P(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){$(e,t)}}}function Ye(o){var t;let e,l;return e=new Be({props:{hideEmbeddingName:!0,embedding:(t=o[0].field.signal)==null?void 0:t.signal_name}}),{c(){J(e.$$.fragment)},l(a){U(e.$$.fragment,a)},m(a,r){x(e,a,r),l=!0},p(a,r){var u;const n={};r&2&&(n.embedding=(u=a[0].field.signal)==null?void 0:u.signal_name),e.$set(n)},i(a){l||(P(e.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),l=!1},d(a){$(e,a)}}}function me(o,e){let l,t,a,r=e[0].fieldName+"",n,u,i,s,f,d,z,h,m,A=e[0].formattedValue+"",N,R,V,w;const B=[Ye,qe],_=[];function F(v,c){return v[0].isEmbeddingSignal?0:v[0].isSignal?1:-1}return~(f=F(e))&&(d=_[f]=B[f](e)),{key:o,first:null,c(){l=E("tr"),t=E("td"),a=E("span"),n=O(r),i=q(),s=E("td"),d&&d.c(),z=q(),h=E("td"),m=E("div"),N=O(A),V=q(),this.h()},l(v){l=S(v,"TR",{class:!0});var c=k(l);t=S(c,"TD",{class:!0});var M=k(t);a=S(M,"SPAN",{title:!0});var I=k(a);n=Q(I,r),I.forEach(g),M.forEach(g),i=Y(c),s=S(c,"TD",{class:!0});var le=k(s);d&&d.l(le),le.forEach(g),z=Y(c),h=S(c,"TD",{class:!0});var ae=k(h);m=S(ae,"DIV",{title:!0,class:!0});var ie=k(m);N=Q(ie,A),ie.forEach(g),ae.forEach(g),V=Y(c),c.forEach(g),this.h()},h(){p(a,"title",u=e[0].fieldName),oe(a,"padding-left",`${e[0].indentLevel*12}px`),p(t,"class","truncate p-2 font-mono text-xs font-medium text-neutral-500"),p(s,"class","w-10"),p(m,"title",R=`${e[0].value}`),p(m,"class","truncate pr-2 text-xs"),fe(m,"italic",e[0].formattedValue===null),p(h,"class","p-2"),p(l,"class","border-gray-300"),this.first=l},m(v,c){D(v,l,c),b(l,t),b(t,a),b(a,n),b(l,i),b(l,s),~f&&_[f].m(s,null),b(l,z),b(l,h),b(h,m),b(m,N),b(l,V),w=!0},p(v,c){e=v,(!w||c&2)&&r!==(r=e[0].fieldName+"")&&W(n,r),(!w||c&2&&u!==(u=e[0].fieldName))&&p(a,"title",u),c&2&&oe(a,"padding-left",`${e[0].indentLevel*12}px`);let M=f;f=F(e),f===M?~f&&_[f].p(e,c):(d&&(ee(),y(_[M],1,1,()=>{_[M]=null}),te()),~f?(d=_[f],d?d.p(e,c):(d=_[f]=B[f](e),d.c()),P(d,1),d.m(s,null)):d=null),(!w||c&2)&&A!==(A=e[0].formattedValue+"")&&W(N,A),(!w||c&2&&R!==(R=`${e[0].value}`))&&p(m,"title",R),(!w||c&2)&&fe(m,"italic",e[0].formattedValue===null)},i(v){w||(P(d),w=!0)},o(v){y(d),w=!1},d(v){v&&g(l),~f&&_[f].d()}}}function Ge(o){let e,l,t=o[1].length>0&&ce(o);return{c(){t&&t.c(),e=re()},l(a){t&&t.l(a),e=re()},m(a,r){t&&t.m(a,r),D(a,e,r),l=!0},p(a,[r]){a[1].length>0?t?(t.p(a,r),r&2&&P(t,1)):(t=ce(a),t.c(),P(t,1),t.m(e.parentNode,e)):t&&(ee(),y(t,1,1,()=>{t=null}),te())},i(a){l||(P(t),l=!0)},o(a){y(t),l=!1},d(a){t&&t.d(a),a&&g(e)}}}function je(o,e,l){let t,a,{row:r}=e,{visibleFields:n}=e,{selectRowsSchema:u=void 0}=e;const i=ze();ve(o,i,f=>l(5,a=f));function s(f){return Ae(f).filter(z=>ye(z,n)).map(z=>{var w;const h=L.field(z),m=L.path(z);let A=L.value(z);if(h.dtype==="string_span"){if(u==null)return null;const B=[];for(let _=m.length-1;_>=0;_--){const F=m.slice(0,_);if(Ee(u==null?void 0:u.schema,F).dtype==="string"){const c=L.value(Se(f,F)),{start:M,end:I}=A;B.push(c.slice(M,I));break}}A=B}const N=((w=a.data)==null?void 0:w.some(B=>{var _;return B.name===((_=h.signal)==null?void 0:_.signal_name)}))||!1,R=Pe(h);let V;return N||R&&h.dtype==null||h.dtype==="embedding"||h.repeated_field!=null?V="":A==null?V=null:V=Ve(A),{indentLevel:m.length-1,fieldName:m[m.length-1],field:h,path:m,isSignal:R,isPreviewSignal:u!=null?Ne(u,m):!1,isEmbeddingSignal:N,value:A,formattedValue:V}}).filter(z=>z!=null)}return o.$$set=f=>{"row"in f&&l(0,r=f.row),"visibleFields"in f&&l(3,n=f.visibleFields),"selectRowsSchema"in f&&l(4,u=f.selectRowsSchema)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=s(r))},[r,t,i,n,u]}class Xe extends X{constructor(e){super(),Z(this,e,je,Ge,H,{row:0,visibleFields:3,selectRowsSchema:4})}}export{Xe as R,Ce as S};
