(function(){"use strict";var e={375:function(e,t,n){var i=n(821);const s=["data-page-index"],o={key:0,class:"question-container"},r=["id"],a={key:1,class:"question-container"},l=["id"],d={key:2,class:"question-container"},u=["id"],h={key:3,class:"question-container"},c=["id"],p={key:4,class:"question-container"},m=["id"],g={key:5,class:"question-container"},q=["id"],f={class:"row flow-navigation"},v={class:"col"};function b(e,t,n,b,x,y){const w=(0,i.up)("SingleChoiceQuestion"),C=(0,i.up)("MultiChoiceQuestion"),_=(0,i.up)("OpenQuestion"),k=(0,i.up)("MatrixQuestion"),H=(0,i.up)("SemanticDifferential"),M=(0,i.up)("TransitionQuestion");return(0,i.wg)(),(0,i.iD)(i.HY,null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(x.parsedQuestConfig,(t=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:t.question,"data-page-index":t.page},["single_choice"===t.type?((0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(w,{qid:t.question,text:t.text,items:t.items,onResponseChanged:y.updateResponses,class:"question-body"},null,8,["qid","text","items","onResponseChanged"]),(0,i._)("div",{id:"required-hint-"+t.question,class:"required-hint hidden"},(0,i.zw)(e.$t("required-but-missing-hint")),9,r)])):(0,i.kq)("",!0),"multi_choice"===t.type?((0,i.wg)(),(0,i.iD)("div",a,[(0,i.Wm)(C,{qid:t.question,text:t.text,items:t.items,required:t.required,onResponseChanged:y.updateResponses,class:"question-body"},null,8,["qid","text","items","required","onResponseChanged"]),(0,i._)("div",{id:"required-hint-"+t.question,class:"required-hint hidden"},(0,i.zw)(e.$t("required-but-missing-hint")),9,l)])):(0,i.kq)("",!0),"open"===t.type?((0,i.wg)(),(0,i.iD)("div",d,[(0,i.Wm)(_,{qid:t.question,text:t.text,options:t.options,onResponseChanged:y.updateResponses,class:"question-body"},null,8,["qid","text","options","onResponseChanged"]),(0,i._)("div",{id:"required-hint-"+t.question,class:"required-hint hidden"},(0,i.zw)(e.$t("required-but-missing-hint")),9,u)])):(0,i.kq)("",!0),"matrix"===t.type?((0,i.wg)(),(0,i.iD)("div",h,[(0,i.Wm)(k,{qid:t.question,text:t.text,items:t.items,scale:t.scale,onResponseChanged:y.updateResponses,class:"question-body"},null,8,["qid","text","items","scale","onResponseChanged"]),(0,i._)("div",{id:"required-hint-"+t.question,class:"required-hint hidden"},(0,i.zw)(e.$t("required-but-missing-hint")),9,c)])):(0,i.kq)("",!0),"semantic_diff"===t.type?((0,i.wg)(),(0,i.iD)("div",p,[(0,i.Wm)(H,{qid:t.question,text:t.text,items:t.items,scale:t.scale,onResponseChanged:y.updateResponses,class:"question-body"},null,8,["qid","text","items","scale","onResponseChanged"]),(0,i._)("div",{id:"required-hint-"+t.question,class:"required-hint hidden"},(0,i.zw)(e.$t("required-but-missing-hint")),9,m)])):(0,i.kq)("",!0),"transition"===t.type?((0,i.wg)(),(0,i.iD)("div",g,[(0,i.Wm)(M,{qid:t.question,text:t.text,onResponseChanged:y.updateResponses,class:"question-body"},null,8,["qid","text","onResponseChanged"]),(0,i._)("div",{id:"required-hint-"+t.question,class:"required-hint hidden"},(0,i.zw)(e.$t("required-but-missing-hint")),9,q)])):(0,i.kq)("",!0)],8,s)),[[i.F8,x.currentPage===t.page]]))),128)),(0,i._)("div",f,[(0,i._)("div",v,[(0,i._)("button",{class:"flow-btn",type:"button",onClick:t[0]||(t[0]=(...e)=>y.next&&y.next(...e))},(0,i.zw)(e.$t("next-btn-label"))+"  ›",1)])])],64)}const x=["innerHTML"],y=["id"],w={class:"form-check-label rb-cb-label"},C=["dataid","name","value"],_=["innerHTML"];function k(e,t,n,s,o,r){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{innerHTML:n.text},null,8,x),(0,i._)("div",{id:"answer-"+n.qid,class:"question-response-body"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.items,((e,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s,class:"question-choice-item form-check"},[(0,i._)("label",w,[(0,i._)("input",{class:"form-check-input",type:"radio",dataid:n.qid,name:"q-"+n.qid,value:e.value,onChange:t[0]||(t[0]=e=>r.responseChanged(e))},null,40,C),(0,i._)("span",{innerHTML:e.label},null,8,_)])])))),128))],8,y)])}var H={name:"SingleChoiceQuestion",props:["qid","text","items"],emits:["responseChanged"],data:function(){return{response:""}},created(){this.response=-99,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},methods:{responseChanged(e){this.response=e.target.value,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})}}},M=n(3744);const D=(0,M.Z)(H,[["render",k]]);var T=D;const L=["innerHTML"],R={class:"question-response-body"},S={class:"form-check-label rb-cb-label"},Q=["name","value"],P=["innerHTML"];function O(e,t,n,s,o,r){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{innerHTML:n.text},null,8,L),(0,i._)("div",R,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.items,((e,n)=>((0,i.wg)(),(0,i.iD)("div",{key:n,class:"question-choice-item form-check"},[(0,i._)("label",S,[(0,i._)("input",{class:"form-check-input",type:"checkbox",name:e.id,value:e.value,onChange:t[0]||(t[0]=e=>r.responseChanged(e))},null,40,Q),(0,i._)("span",{innerHTML:e.label},null,8,P)])])))),128))])])}var $={name:"MultiChoiceQuestion",props:["qid","text","items"],emits:["responseChanged"],data:function(){return{response:{}}},created(){this.items.forEach((e=>{this.response[e.id]=!1})),this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},methods:{responseChanged(e){this.response[e.target.name]=e.target.checked,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})}}};const E=(0,M.Z)($,[["render",O]]);var z=E;const Y=["innerHTML"],j=["id"],K=["name"],W=["name"];function Z(e,t,n,s,o,r){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{innerHTML:n.text},null,8,Y),(0,i._)("div",{id:"answer-"+n.qid,class:"question-response-body"},["small"==n.options.display?((0,i.wg)(),(0,i.iD)("input",{key:0,type:"text",name:n.qid,onChange:t[0]||(t[0]=e=>r.responseChanged(e))},null,40,K)):(0,i.kq)("",!0),"large"==n.options.display?((0,i.wg)(),(0,i.iD)("textarea",{key:1,class:"open-question-textarea",type:"text",name:n.qid,onChange:t[1]||(t[1]=e=>r.responseChanged(e))},null,40,W)):(0,i.kq)("",!0)],8,j)])}var A={name:"OpenQuestion",props:["qid","text","options"],emits:["responseChanged"],data:function(){return{response:"-99"}},created(){this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:null})},methods:{responseChanged(e){this.response=e.target.value,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:null})}}};const F=(0,M.Z)(A,[["render",Z]]);var B=F;const N=["innerHTML"],I={class:"mq-table"},J={class:"mq-header"},U=(0,i._)("th",null,null,-1),G=["innerHTML"],V=["id"],X=["innerHTML"],ee=["name","value"],te=["innerHTML"];function ne(e,t,n,s,o,r){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{innerHTML:n.text},null,8,N),(0,i._)("table",I,[(0,i._)("thead",J,[(0,i._)("tr",null,[U,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.scale,((e,t)=>((0,i.wg)(),(0,i.iD)("th",{key:t,innerHTML:e.label},null,8,G)))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.items,((e,s)=>((0,i.wg)(),(0,i.iD)("tr",{key:s,id:"answer-item-"+e.id},[(0,i._)("td",{class:"mq-table-td-item",innerHTML:e.label},null,8,X),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.scale,((n,s)=>((0,i.wg)(),(0,i.iD)("td",{key:s,class:"mq-table-td-input"},[(0,i._)("label",null,[(0,i._)("input",{type:"radio",name:e.id,value:n.value,onChange:t[0]||(t[0]=e=>r.responseChanged(e))},null,40,ee),(0,i._)("span",{class:"ps-2 d-sm-none",innerHTML:n.label},null,8,te)])])))),128))],8,V)))),128))])])])}var ie={name:"MatrixQuestion",props:["qid","text","items","scale"],emits:["responseChanged"],data:function(){return{response:{}}},created(){this.items.forEach((e=>{this.response[e.id]=-99})),this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},methods:{responseChanged(e){this.response[e.target.name]=e.target.value,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})}}};const se=(0,M.Z)(ie,[["render",ne]]);var oe=se;const re=["innerHTML"],ae={class:"question-response-body"},le={class:"dq-table"},de=(0,i._)("th",null,null,-1),ue=["innerHTML"],he=(0,i._)("th",null,null,-1),ce=["id"],pe=["innerHTML"],me=["name","value"],ge=["innerHTML"];function qe(e,t,n,s,o,r){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{innerHTML:n.text},null,8,re),(0,i._)("div",ae,[(0,i._)("table",le,[(0,i._)("thead",null,[(0,i._)("tr",null,[de,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.scale,((e,t)=>((0,i.wg)(),(0,i.iD)("th",{key:t,innerHTML:e.label},null,8,ue)))),128)),he])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.items,((e,s)=>((0,i.wg)(),(0,i.iD)("tr",{key:s,id:"answer-item-"+e.id},[(0,i._)("td",{class:"mq-table-td-item dq-table-td-item-left",innerHTML:e.label},null,8,pe),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.scale,((n,s)=>((0,i.wg)(),(0,i.iD)("td",{key:s,class:"dq-table-td-input"},[(0,i._)("label",null,[(0,i._)("input",{type:"radio",name:e.id,value:n.value,onChange:t[0]||(t[0]=e=>r.responseChanged(e))},null,40,me)])])))),128)),(0,i._)("td",{class:"mq-table-td-item dq-table-td-item-right",innerHTML:e.label_alt},null,8,ge)],8,ce)))),128))])])])])}var fe={name:"SemanticDifferential",props:["qid","text","items","scale"],emits:["responseChanged"],data:function(){return{response:{}}},created(){this.items.forEach((e=>{this.response[e.id]=-99})),this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},methods:{responseChanged(e){this.response[e.target.name]=e.target.value,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})}}};const ve=(0,M.Z)(fe,[["render",qe]]);var be=ve;const xe=["innerHTML"];function ye(e,t,n,s,o,r){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{innerHTML:n.text},null,8,xe)])}var we={name:"TransitionQuestion",props:["qid","text"],emits:["responseChanged"],created(){this.$emit("responseChanged",{id:this.qid,response:null,question:this.text,items:null})}};const Ce=(0,M.Z)(we,[["render",ye]]);var _e=Ce,ke={name:"QApp",components:{SingleChoiceQuestion:T,MultiChoiceQuestion:z,OpenQuestion:B,MatrixQuestion:oe,SemanticDifferential:be,TransitionQuestion:_e},props:{questionnaireConfig:String,actionUrl:String,language:String},data(){return this.$i18n.locale=this.language,{parsedQuestConfig:JSON.parse(this.questionnaireConfig),responses:{},currentPage:1,minPage:1,maxPage:1,locale:this.language,displayedRequiredHint:!1}},created(){this.setMaxPage(),this.currentPage=this.minPage},watch:{locale(e){this.$i18n.locale=e}},methods:{updateResponses(e){this.responses[e.id]={response:e.response,question:e.question,items:e.items}},setMaxPage(){let e=[];this.parsedQuestConfig.forEach((t=>e.push(t.page))),this.minPage=Math.min(...e),this.maxPage=Math.max(...e)},next(){(this.displayedRequiredHint||this.checkRequired())&&(this.currentPage===this.maxPage?this.submitData():(this.currentPage+=1,null===document.querySelector("[data-page-index='"+this.currentPage+"']")&&this.next()))},getActiveQuestions(){let e=[];return this.parsedQuestConfig.forEach((t=>{this.currentPage===t.page&&e.push(t)})),e},checkRequired(){let e=[],t=new Set;return this.getActiveQuestions().forEach((n=>{if(document.querySelectorAll("div[id*=answer-], tr[id*=answer-]").forEach((e=>e.classList.remove("required-but-missing"))),document.querySelectorAll("div[class*=required-hint]").forEach((e=>e.classList.remove("show"))),n.required){let i=this.responses[n.question].response;if(i instanceof Object)for(let s in i)-99!==i[s]&&"-99"!==i[s]||(e.push("item-"+s),t.add(n.question));else-99!==i&&"-99"!==i||(e.push(n.question),t.add(n.question))}})),0===e.length||(e.forEach((e=>{let t="answer-"+e;console.log(e),console.log(t),document.getElementById(t).classList.add("required-but-missing")})),t.forEach((e=>{document.getElementById("required-hint-"+e).classList.add("show")})),this.displayedRequiredHint=!0,!1)},submitData(){let e=new FormData;e.append("post_data",JSON.stringify(this.responses));let t=document.querySelector("input[name='csrfmiddlewaretoken']");e.append("csrfmiddlewaretoken",t.value),fetch(this.actionUrl,{method:"POST",body:e}).then((e=>{e.redirected&&(window.location.href=e.url)})).catch((e=>{console.info(e)}))}}};function He(e){e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{"next-btn-label":e=>{const{normalize:t}=e;return t(["Next"])},"required-but-missing-hint":e=>{const{normalize:t}=e;return t(["Please answer this question."])}},de:{"next-btn-label":e=>{const{normalize:t}=e;return t(["Weiter"])},"required-but-missing-hint":e=>{const{normalize:t}=e;return t(["Bitte beantworten Sie diese Frage."])}}}})}"function"===typeof He&&He(ke);const Me=(0,M.Z)(ke,[["render",b]]);var De=Me,Te=n(9150);const Le=new Te.o({fallbackLocale:"en"}),Re="#qapp",Se=document.querySelector(Re),Qe=(0,i.ri)(De,{...Se.dataset});Qe.use(Le),Qe.mount(Re)}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,i,s,o){if(!i){var r=1/0;for(u=0;u<e.length;u++){i=e[u][0],s=e[u][1],o=e[u][2];for(var a=!0,l=0;l<i.length;l++)(!1&o||r>=o)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(a=!1,o<r&&(r=o));if(a){e.splice(u--,1);var d=s();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[i,s,o]}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={744:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,o,r=i[0],a=i[1],l=i[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(l)var u=l(n)}for(t&&t(i);d<r.length;d++)o=r[d],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},i=self["webpackChunkvue_frontend"]=self["webpackChunkvue_frontend"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(375)}));i=n.O(i)})();
//# sourceMappingURL=vue_questionnaire.js.map