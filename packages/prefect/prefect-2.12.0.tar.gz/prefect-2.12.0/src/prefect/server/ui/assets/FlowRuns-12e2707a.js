import{d as J,U as P,a as Q,r as m,E as _,c as r,V as W,X,Y,Z,$,f as C,g as t,w as c,o as s,j as a,u as e,a0 as G,i as b,L as I,F as g,a1 as K,n as F,a2 as ee,h as i,N as w,a3 as se,a4 as oe,a5 as te,a6 as le,a7 as ne,a8 as ae,a9 as ue,aa as re,H as ce,q as ie,ab as de}from"./index-56019a71.js";import{u as fe}from"./usePageTitle-b1b81d41.js";const pe={class:"flow-runs__list"},me={class:"flow-runs__list-controls--right"},ye=J({__name:"FlowRuns",setup(_e){const h=P(),d=Q(),v=m(),R=_(d.flowRuns.getFlowRunsCount,[{}]),V=r(()=>R.executed),B=r(()=>R.response===0),f=m(),S=W(f,1200),{filter:o,isCustomFilter:x}=X({flowRuns:{nameLike:S}}),p={interval:3e4},y=_(d.flowRuns.getFlowRunsCount,[o],p),N=r(()=>y.response),T=_(d.ui.getFlowRunHistory,[o],p),L=r(()=>T.response??[]),{flowRuns:k,subscriptions:E,loadMore:H}=Y(o,p),l=m([]),{margin:O}=Z(),U=()=>({rootMargin:O.value}),{stuck:A}=$(v,U),M=r(()=>({listControls:{"flow-runs__list-controls--stuck":A.value}}));function q(){h.push(de.flowRuns())}const D=()=>{l.value=[],E.refresh(),y.refresh()};return fe("Flow Runs"),(we,n)=>{const j=C("p-button"),z=C("p-layout-default");return s(),t(z,{class:"flow-runs"},{header:c(()=>[a(e(G))]),default:c(()=>[V.value?(s(),b(g,{key:0},[B.value?(s(),t(e(I),{key:0})):(s(),b(g,{key:1},[a(e(K)),e(F).md?(s(),t(e(ee),{key:0,history:L.value,"start-date":e(o).flowRuns.expectedStartTimeAfter,"end-date":e(o).flowRuns.expectedStartTimeBefore,class:"flow-runs__chart"},null,8,["history","start-date","end-date"])):i("",!0),w("div",pe,[w("div",{ref_key:"listControls",ref:v,class:se(["flow-runs__list-controls",M.value.listControls])},[w("div",me,[l.value.length==0?(s(),t(e(oe),{key:0,count:N.value,label:"Flow run"},null,8,["count"])):(s(),t(e(te),{key:1,count:l.value.length},null,8,["count"])),a(e(le),{selected:l.value,onDelete:D},null,8,["selected"])]),e(F).md?(s(),t(e(ne),{key:0,modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=u=>f.value=u),placeholder:"Search by run name",label:"Search by run name"},null,8,["modelValue"])):i("",!0),a(e(ae),{modelValue:e(o).sort,"onUpdate:modelValue":n[1]||(n[1]=u=>e(o).sort=u)},null,8,["modelValue"])],2),a(e(ue),{selected:l.value,"onUpdate:selected":n[2]||(n[2]=u=>l.value=u),selectable:"","flow-runs":e(k),onBottom:e(H)},null,8,["selected","flow-runs","onBottom"]),e(k).length?i("",!0):(s(),t(e(re),{key:0},ce({_:2},[e(x)?{name:"actions",fn:c(()=>[a(j,{small:"",onClick:q},{default:c(()=>[ie(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024))])],64))],64)):i("",!0)]),_:1})}}});export{ye as default};
