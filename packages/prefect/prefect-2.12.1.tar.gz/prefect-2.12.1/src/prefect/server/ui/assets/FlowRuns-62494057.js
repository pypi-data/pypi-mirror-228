import{d as z,W as K,v as P,r as m,E as w,c as r,X as Q,Y as X,Z as Y,_ as Z,$,b,e as t,w as c,o as s,i as a,u as e,a0 as j,h as C,I as G,F as g,a1 as J,k as F,a2 as ee,g as i,K as _,a3 as se,a4 as oe,a5 as te,a6 as le,a7 as ne,a8 as ae,a9 as ue,aa as re,D as ce,n as ie,ab as de}from"./index-883a13bc.js";import{u as fe}from"./usePageTitle-73280a66.js";const pe={class:"flow-runs__list"},me={class:"flow-runs__list-controls--right"},ye=z({__name:"FlowRuns",setup(we){const h=K(),d=P(),v=m(),R=w(d.flowRuns.getFlowRunsCount,[{}]),S=r(()=>R.executed),V=r(()=>R.response===0),f=m(),x=Q(f,1200),{filter:o,isCustomFilter:B}=X({flowRuns:{nameLike:x}}),p={interval:3e4},y=w(d.flowRuns.getFlowRunsCount,[o],p),T=r(()=>y.response),N=w(d.ui.getFlowRunHistory,[o],p),D=r(()=>N.response??[]),{flowRuns:k,subscriptions:L,loadMore:A}=Y(o,p),l=m([]),{margin:E}=Z(),H=()=>({rootMargin:E.value}),{stuck:M}=$(v,H),O=r(()=>({listControls:{"flow-runs__list-controls--stuck":M.value}}));function U(){h.push(de.flowRuns())}const I=()=>{l.value=[],L.refresh(),y.refresh()};return fe("Flow Runs"),(_e,n)=>{const W=b("p-button"),q=b("p-layout-default");return s(),t(q,{class:"flow-runs"},{header:c(()=>[a(e(j))]),default:c(()=>[S.value?(s(),C(g,{key:0},[V.value?(s(),t(e(G),{key:0})):(s(),C(g,{key:1},[a(e(J)),e(F).md?(s(),t(e(ee),{key:0,history:D.value,"start-date":e(o).flowRuns.expectedStartTimeAfter,"end-date":e(o).flowRuns.expectedStartTimeBefore,class:"flow-runs__chart"},null,8,["history","start-date","end-date"])):i("",!0),_("div",pe,[_("div",{ref_key:"listControls",ref:v,class:se(["flow-runs__list-controls",O.value.listControls])},[_("div",me,[l.value.length==0?(s(),t(e(oe),{key:0,count:T.value,label:"Flow run"},null,8,["count"])):(s(),t(e(te),{key:1,count:l.value.length},null,8,["count"])),a(e(le),{selected:l.value,onDelete:I},null,8,["selected"])]),e(F).md?(s(),t(e(ne),{key:0,modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=u=>f.value=u),placeholder:"Search by run name",label:"Search by run name"},null,8,["modelValue"])):i("",!0),a(e(ae),{modelValue:e(o).sort,"onUpdate:modelValue":n[1]||(n[1]=u=>e(o).sort=u)},null,8,["modelValue"])],2),a(e(ue),{selected:l.value,"onUpdate:selected":n[2]||(n[2]=u=>l.value=u),selectable:"","flow-runs":e(k),onBottom:e(A)},null,8,["selected","flow-runs","onBottom"]),e(k).length?i("",!0):(s(),t(e(re),{key:0},ce({_:2},[e(B)?{name:"actions",fn:c(()=>[a(W,{small:"",onClick:U},{default:c(()=>[ie(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024))])],64))],64)):i("",!0)]),_:1})}}});export{ye as default};
