"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[40421],{57966:function(t,e,n){n.d(e,{z:function(){return i}});var i=function(t){return function(e,n){return t.includes(e,n)}}},27593:function(t,e,n){n.d(e,{N:function(){return i}});var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}},73059:function(t,e,n){n.d(e,{W:function(){return s},Z:function(){return a}});var i=n(53709),r=n(58831),s=function(t){var e=t.attributes.entity_id||[],n=(0,i.Z)(new Set(e.map((function(t){return(0,r.M)(t)}))));return 1===n.length?n[0]:void 0},a=function(t,e,n,i,r){return t.connection.subscribeMessage(r,{type:"group/start_preview",flow_id:e,flow_type:n,user_input:i})}},41499:function(t,e,n){n.d(e,{AW:function(){return i},Ft:function(){return r},J9:function(){return s}});var i="battery",r="timestamp",s=function(t,e){return t.callWS({type:"sensor/device_class_convertible_units",device_class:e})}},24833:function(t,e,n){if(n.d(e,{BD:function(){return _},Fj:function(){return x},M$:function(){return C},Sk:function(){return w},UJ:function(){return g},X4:function(){return m},hF:function(){return k},k6:function(){return h},kK:function(){return p},oF:function(){return v},zG:function(){return b}}),32143==n.j)var i=n(99312);if(32143==n.j)var r=n(81043);var s=n(49706);if(32143==n.j)var a=n(58831);if(32143==n.j)var u=n(22311);var o=n(40095),c=n(85415);if(32143==n.j)var d=n(26765);if(32143==n.j)var l=n(81796);var f,v=1,p=2,h=4,b=8,_=16,y=function(t){return(0,o.f)(t,h)&&"number"==typeof t.in_progress},k=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(t.state===s.uo||e&&Boolean(t.attributes.skipped_version))&&(0,o.e)(t,v)},w=function(t){return function(t){return y(t.attributes)}(t)||!!t.attributes.in_progress},m=function(t){return y(t)||!!t.in_progress},g=function(t,e){return t.callWS({type:"update/release_notes",entity_id:e})},Z=function(t,e){return Object.values(t).filter((function(t){return"update"===(0,u.N)(t)})).sort((function(t,n){return"Home Assistant Core"===t.attributes.title?-3:"Home Assistant Core"===n.attributes.title?3:"Home Assistant Operating System"===t.attributes.title?-2:"Home Assistant Operating System"===n.attributes.title?2:"Home Assistant Supervisor"===t.attributes.title?-1:"Home Assistant Supervisor"===n.attributes.title?1:(0,c.f)(t.attributes.title||t.attributes.friendly_name||"",n.attributes.title||n.attributes.friendly_name||"",e)}))},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Z(t).filter((function(t){return k(t,e)}))},C=32143==n.j?(f=(0,r.Z)((0,i.Z)().mark((function t(e,n){var r,s,u;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=Z(n.states,n.locale.language).map((function(t){return t.entity_id}))).length){t.next=4;break}return(0,d.Ys)(e,{title:n.localize("ui.panel.config.updates.no_update_entities.title"),text:n.localize("ui.panel.config.updates.no_update_entities.description"),warning:!0}),t.abrupt("return");case 4:return s=0,t.next=7,n.connection.subscribeEvents((function(t){"update"===(0,a.M)(t.data.entity_id)&&(s++,(0,l.C)(e,{message:n.localize("ui.panel.config.updates.updates_refreshed",{count:s})}))}),"state_changed");case 7:return u=t.sent,t.next=10,n.callService("homeassistant","update_entity",{entity_id:r});case 10:return t.next=12,new Promise((function(t){setTimeout(t,1e4)}));case 12:u(),0===s&&(0,l.C)(e,{message:n.localize("ui.panel.config.updates.no_new_updates")});case 14:case"end":return t.stop()}}),t)}))),function(t,e){return f.apply(this,arguments)}):null},23639:function(t,e,n){var i,r,s,a=n(88962),u=n(33368),o=n(71650),c=n(82390),d=n(69205),l=n(70906),f=n(91808),v=n(68144),p=n(79932),h=n(41826),b=n(91741),_=n(56007),y=n(41499);(0,f.Z)([(0,p.Mo)("entity-preview-row")],(function(t,e){var n=function(e){(0,d.Z)(i,e);var n=(0,l.Z)(i);function i(){var e;(0,o.Z)(this,i);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return e=n.call.apply(n,[this].concat(s)),t((0,c.Z)(e)),e}return(0,u.Z)(i)}(e);return{F:n,d:[{kind:"field",decorators:[(0,p.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,p.SB)()],key:"stateObj",value:void 0},{kind:"method",key:"render",value:function(){if(!this.stateObj)return v.Ld;var t=this.stateObj;return(0,v.dy)(i||(i=(0,a.Z)(['<state-badge .hass="','" .stateObj="','"></state-badge> <div class="name" .title="','"> ',' </div> <div class="value"> '," </div>"])),this.hass,t,(0,b.C)(t),(0,b.C)(t),t.attributes.device_class!==y.Ft||(0,_.rk)(t.state)?(0,h.computeStateDisplay)(this.hass.localize,t,this.hass.locale,this.hass.config,this.hass.entities):(0,v.dy)(r||(r=(0,a.Z)([' <hui-timestamp-display .hass="','" .ts="','" capitalize></hui-timestamp-display> '])),this.hass,new Date(t.state)))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,v.iv)(s||(s=(0,a.Z)([":host{display:flex;align-items:center;flex-direction:row}.name{margin-left:16px;margin-right:8px;flex:1 1 30%}.value{direction:ltr}"])))}}]}}),v.oi)},91498:function(t,e,n){n.r(e);var i,r=n(99312),s=n(81043),a=n(88962),u=n(33368),o=n(71650),c=n(82390),d=n(69205),l=n(70906),f=n(91808),v=n(34541),p=n(47838),h=n(68144),b=n(79932),_=n(73059),y=(n(23639),n(38346));(0,f.Z)([(0,b.Mo)("flow-preview-group")],(function(t,e){var n,f=function(e){(0,d.Z)(i,e);var n=(0,l.Z)(i);function i(){var e;(0,o.Z)(this,i);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return e=n.call.apply(n,[this].concat(s)),t((0,c.Z)(e)),e}return(0,u.Z)(i)}(e);return{F:f,d:[{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.Cb)()],key:"flowType",value:void 0},{kind:"field",key:"handler",value:void 0},{kind:"field",decorators:[(0,b.Cb)()],key:"stepId",value:void 0},{kind:"field",decorators:[(0,b.Cb)()],key:"flowId",value:void 0},{kind:"field",decorators:[(0,b.Cb)()],key:"stepData",value:void 0},{kind:"field",decorators:[(0,b.SB)()],key:"_preview",value:void 0},{kind:"field",key:"_unsub",value:void 0},{kind:"method",key:"disconnectedCallback",value:function(){(0,v.Z)((0,p.Z)(f.prototype),"disconnectedCallback",this).call(this),this._unsub&&(this._unsub.then((function(t){return t()})),this._unsub=void 0)}},{kind:"method",key:"willUpdate",value:function(t){t.has("stepData")&&this._debouncedSubscribePreview()}},{kind:"method",key:"render",value:function(){return(0,h.dy)(i||(i=(0,a.Z)(['<entity-preview-row .hass="','" .stateObj="','"></entity-preview-row>'])),this.hass,this._preview)}},{kind:"field",key:"_setPreview",value:function(){var t=this;return function(e){var n=(new Date).toISOString();t._preview=Object.assign({entity_id:"".concat(t.stepId,".flow_preview"),last_changed:n,last_updated:n,context:{id:"",parent_id:null,user_id:null}},e)}}},{kind:"field",key:"_debouncedSubscribePreview",value:function(){var t=this;return(0,y.D)((function(){t._subscribePreview()}),250)}},{kind:"method",key:"_subscribePreview",value:(n=(0,s.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._unsub){t.next=6;break}return t.next=3,this._unsub;case 3:t.t0=t.sent,(0,t.t0)(),this._unsub=void 0;case 6:if("repair_flow"!==this.flowType){t.next=8;break}return t.abrupt("return");case 8:try{this._unsub=(0,_.Z)(this.hass,this.flowId,this.flowType,this.stepData,this._setPreview)}catch(e){this._preview=void 0}case 9:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]}}),h.oi)}}]);
//# sourceMappingURL=40421-n-khoWvOcOc.js.map